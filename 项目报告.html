<!DOCTYPE html><html><head>
      <title>&#x9879;&#x76EE;&#x62A5;&#x544A;</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\XCDN\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.6.8\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p,html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div{display:inline}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  300px/2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h2> &#x9879;&#x76EE;&#x62A5;&#x544A;</h2>

<div class="md-toc">
<details style="padding:0;;padding-left:0px;" open>
        <summary class="md-toc-link-wrapper">
          <a href="#&#x4E00;-introduction" class="md-toc-link"><p>&#x4E00;&#x3001;Introduction</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#1-gan" class="md-toc-link">
            <ol>
<li>GAN</li>
</ol>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#2-cartoongan" class="md-toc-link">
            <ol start="2">
<li>cartoonGAN</li>
</ol>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#3-animegan" class="md-toc-link">
            <ol start="3">
<li>animeGAN</li>
</ol>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:0px;" open>
        <summary class="md-toc-link-wrapper">
          <a href="#&#x4E8C;-configuration" class="md-toc-link"><p>&#x4E8C;&#x3001;Configuration</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#requirements" class="md-toc-link">
            <p>Requirements</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#structure" class="md-toc-link">
            <p>Structure</p>

          </a></div>
        </div>
      </details>
    <details style="padding:0;;padding-left:0px;" open>
        <summary class="md-toc-link-wrapper">
          <a href="#&#x4E09;-process-and-results" class="md-toc-link"><p>&#x4E09;&#x3001;Process and Results</p>
</a>
          </summary>
        <div>
          <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#model-construction" class="md-toc-link">
            <p>Model construction</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#picture-stylized" class="md-toc-link">
            <p>Picture stylized</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#video-stylized" class="md-toc-link">
            <p>Video stylized</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:42px">
          <a href="#face-stylized" class="md-toc-link">
            <p>Face stylized</p>

          </a></div>
        </div>
      </details>
    <div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#&#x56DB;-conclusion-and-distribution" class="md-toc-link">
            <p>&#x56DB;&#x3001;Conclusion and Distribution</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#&#x4E94;-references" class="md-toc-link">
            <p>&#x4E94;&#x3001;References</p>

          </a></div>
</div>
<h3 class="mume-header" id="%E4%B8%80-introduction">&#x4E00;&#x3001;Introduction</h3>

<h4 class="mume-header" id="1-gan">1. GAN</h4>

<p>&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#x751F;&#x6210;&#x5BF9;&#x6297;&#x7F51;&#x7EDC;&#xFF08;GAN&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x6A21;&#x578B;&#xFF0C;&#x7531;&#x751F;&#x6210;&#x5668;&#xFF08;Generator&#xFF09;&#x548C;&#x5224;&#x522B;&#x5668;&#xFF08;Discriminator&#xFF09;&#x4E24;&#x4E2A;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#x3002;GAN&#x7684;&#x76EE;&#x6807;&#x662F;&#x901A;&#x8FC7;&#x5BF9;&#x6297;&#x8BAD;&#x7EC3;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x8BA9;&#x751F;&#x6210;&#x5668;&#x751F;&#x6210;&#x7684;&#x6837;&#x672C;&#x4E0E;&#x771F;&#x5B9E;&#x6837;&#x672C;&#x65E0;&#x6CD5;&#x88AB;&#x5224;&#x522B;&#x5668;&#x533A;&#x5206;&#x51FA;&#x6765;&#xFF0C;&#x4ECE;&#x800C;&#x751F;&#x6210;&#x903C;&#x771F;&#x7684;&#x6570;&#x636E;&#x6837;&#x672C;&#x3002;<br>
&#x751F;&#x6210;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x795E;&#x7ECF;&#x7F51;&#x7EDC;&#x6A21;&#x578B;&#xFF0C;&#x5B83;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x566A;&#x58F0;&#x5411;&#x91CF;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#xFF0C;&#x5E76;&#x8F93;&#x51FA;&#x4E00;&#x4E2A;&#x4E0E;&#x771F;&#x5B9E;&#x6837;&#x672C;&#x76F8;&#x4F3C;&#x7684;&#x6570;&#x636E;&#x6837;&#x672C;&#x3002;&#x751F;&#x6210;&#x5668;&#x7684;&#x76EE;&#x6807;&#x662F;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x751F;&#x6210;&#x903C;&#x771F;&#x7684;&#x6837;&#x672C;&#xFF0C;&#x4EE5;&#x6B3A;&#x9A97;&#x5224;&#x522B;&#x5668;&#x3002;</p>
<p>&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#x5F53;&#x6A21;&#x578B;&#x90FD;&#x662F;&#x591A;&#x5C42;&#x611F;&#x77E5;&#x5668;&#x65F6;&#xFF0C;&#x5BF9;&#x6297;&#x5EFA;&#x6A21;&#x6846;&#x67B6;&#x6700;&#x5BB9;&#x6613;&#x5E94;&#x7528;&#x3002;&#x8981;&#x4E86;&#x89E3;&#x53D1;&#x751F;&#x5668;&#x5728;&#x6570;&#x636E; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> &#x4E0A;&#x7684;&#x7684;&#x5206;&#x5E03; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>g</mi></msub></mrow><annotation encoding="application/x-tex">p_g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> &#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x8F93;&#x5165;&#x566A;&#x58F0;&#x53D8;&#x91CF; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span> &#x4E0A;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5148;&#x9A8C;&#x6982;&#x7387; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>z</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p_z(z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span> &#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5230;&#x6570;&#x636E;&#x7A7A;&#x95F4;&#x7684;&#x6620;&#x5C04;&#x8868;&#x793A;&#x4E3A; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>z</mi><mo separator="true">;</mo><msub><mi>&#x3B8;</mi><mi>g</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(z;\theta_g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">&#x3B8;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> &#xFF0C;&#x5176;&#x4E2D; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span> &#x662F;&#x4E00;&#x4E2A;&#x5FAE;&#x5206;&#x51FD;&#x6570;&#xFF0C;&#x7531;&#x5177;&#x6709;&#x53C2;&#x6570; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>&#x3B8;</mi><mi>g</mi></msub></mrow><annotation encoding="application/x-tex">\theta_g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">&#x3B8;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> &#x7684;&#x591A;&#x5C42;&#x611F;&#x77E5;&#x5668;&#x8868;&#x793A;&#x3002;&#x6211;&#x4EEC;&#x8FD8;&#x5B9A;&#x4E49;&#x4E86;&#x7B2C;&#x4E8C;&#x4E2A;&#x591A;&#x5C42;&#x611F;&#x77E5;&#x5668; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">;</mo><msub><mi>&#x3B8;</mi><mi>d</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D(x;\theta_d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">&#x3B8;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> &#xFF0C;&#x5B83;&#x8F93;&#x51FA;&#x4E00;&#x4E2A;&#x6807;&#x91CF;&#x3002; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> &#x8868;&#x793A; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> &#x6765;&#x81EA;&#x6570;&#x636E;&#x800C;&#x975E; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>g</mi></msub></mrow><annotation encoding="application/x-tex">p_g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> &#x7684;&#x6982;&#x7387;&#x3002;&#x6211;&#x4EEC;&#x8BAD;&#x7EC3; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span> &#x6765;&#x6700;&#x5927;&#x5316;&#x4E3A; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span> &#x8BAD;&#x7EC3;&#x6837;&#x672C;&#x548C;&#x6837;&#x672C;&#x5206;&#x914D;&#x6B63;&#x786E;&#x6807;&#x7B7E;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x3002;&#x6211;&#x4EEC;&#x540C;&#x65F6;&#x8BAD;&#x7EC3; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span> &#x6765;&#x6700;&#x5C0F;&#x5316;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span> &#x548C; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span> &#x73A9;&#x4EE5;&#x4E0B;&#x5177;&#x6709;&#x4EF7;&#x503C;&#x51FD;&#x6570;<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V(G,D)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span> &#x7684;&#x4E24;&#x4EBA;&#x6700;&#x5927;&#x6700;&#x5C0F;&#x535A;&#x5F08;&#xFF0C;&#x4EF7;&#x503C;&#x51FD;&#x6570;&#x5982;&#x4E0B;:<br>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mrow><mi>min</mi><mo>&#x2061;</mo></mrow><mi>G</mi></munder><munder><mrow><mi>max</mi><mo>&#x2061;</mo></mrow><mi>D</mi></munder><mi>V</mi><mo stretchy="false">(</mo><mi>D</mi><mo separator="true">,</mo><mi>G</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><mi>x</mi><mo>&#x223C;</mo><msub><mi>p</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mrow><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">g</mi></mrow><mi>D</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>+</mo><msub><mi mathvariant="double-struck">E</mi><mrow><mi>z</mi><mo>&#x223C;</mo><msub><mi>p</mi><mi>z</mi></msub><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mrow><mi mathvariant="normal">l</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">g</mi></mrow><mo stretchy="false">(</mo><mn>1</mn><mo>&#x2212;</mo><mi>D</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">(</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\min_G\max_D V(D,G)=\mathbb{E}_{x\sim p_{data}(x)}[\mathrm{log}D(x)] + \mathbb{E}_{z\sim p_z(z)}[\mathrm{log}(1-D(G(z)))]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4943em;vertical-align:-0.7443em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6679em;"><span style="top:-2.3557em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">G</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">min</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.7443em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-2.3557em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.7443em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">G</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mrel mtight">&#x223C;</span><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm" style="margin-right:0.01389em;">log</span></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="mrel mtight">&#x223C;</span><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm" style="margin-right:0.01389em;">log</span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">&#x2212;</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)))]</span></span></span></span></span></p>
<h4 class="mume-header" id="2-cartoongan">2. cartoonGAN</h4>

<p>&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;CartoonGAN&#x662F;&#x4E00;&#x79CD;&#x57FA;&#x4E8E;&#x751F;&#x6210;&#x5BF9;&#x6297;&#x7F51;&#x7EDC;&#xFF08;GAN&#xFF09;&#x7684;&#x56FE;&#x50CF;&#x98CE;&#x683C;&#x8F6C;&#x6362;&#x6A21;&#x578B;&#xFF0C;&#x65E8;&#x5728;&#x5C06;&#x771F;&#x5B9E;&#x7167;&#x7247;&#x8F6C;&#x6362;&#x4E3A;&#x5361;&#x901A;&#x98CE;&#x683C;&#x7684;&#x56FE;&#x50CF;&#x3002;&#x5B83;&#x662F;&#x7531;&#x674E;&#x98DE;&#x98DE;&#x7B49;&#x4EBA;&#x4E8E;2018&#x5E74;&#x63D0;&#x51FA;&#x7684;&#x3002;</p>
<p>&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;CartoonGAN&#x7684;&#x7F51;&#x7EDC;&#x7ED3;&#x6784;&#x7531;&#x751F;&#x6210;&#x5668;&#x548C;&#x5224;&#x522B;&#x5668;&#x7EC4;&#x6210;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;&#x4F20;&#x7EDF;&#x7684;GAN&#x6A21;&#x578B;&#x3002;&#x751F;&#x6210;&#x5668;&#x63A5;&#x6536;&#x771F;&#x5B9E;&#x7167;&#x7247;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#xFF0C;&#x5E76;&#x8F93;&#x51FA;&#x5BF9;&#x5E94;&#x7684;&#x5361;&#x901A;&#x98CE;&#x683C;&#x56FE;&#x50CF;&#x3002;&#x5224;&#x522B;&#x5668;&#x5219;&#x8D1F;&#x8D23;&#x5224;&#x65AD;&#x751F;&#x6210;&#x5668;&#x8F93;&#x51FA;&#x7684;&#x56FE;&#x50CF;&#x662F;&#x771F;&#x5B9E;&#x7167;&#x7247;&#x8FD8;&#x662F;&#x5361;&#x901A;&#x98CE;&#x683C;&#x56FE;&#x50CF;&#x3002;</p>
<p>&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;CartoonGAN&#x7684;&#x8BAD;&#x7EC3;&#x8FC7;&#x7A0B;&#x662F;&#x901A;&#x8FC7;&#x5BF9;&#x6297;&#x8BAD;&#x7EC3;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x5728;&#x6BCF;&#x4E00;&#x8F6E;&#x8BAD;&#x7EC3;&#x4E2D;&#xFF0C;&#x751F;&#x6210;&#x5668;&#x751F;&#x6210;&#x5361;&#x901A;&#x98CE;&#x683C;&#x7684;&#x56FE;&#x50CF;&#xFF0C;&#x5224;&#x522B;&#x5668;&#x6839;&#x636E;&#x771F;&#x5B9E;&#x7167;&#x7247;&#x548C;&#x751F;&#x6210;&#x56FE;&#x50CF;&#x8FDB;&#x884C;&#x5224;&#x522B;&#x3002;&#x751F;&#x6210;&#x5668;&#x548C;&#x5224;&#x522B;&#x5668;&#x901A;&#x8FC7;&#x5BF9;&#x6297;&#x5B66;&#x4E60;&#x7684;&#x65B9;&#x5F0F;&#x76F8;&#x4E92;&#x8C03;&#x6574;&#x53C2;&#x6570;&#xFF0C;&#x4F7F;&#x5F97;&#x751F;&#x6210;&#x7684;&#x5361;&#x901A;&#x98CE;&#x683C;&#x56FE;&#x50CF;&#x66F4;&#x52A0;&#x903C;&#x771F;&#xFF0C;&#x5224;&#x522B;&#x5668;&#x66F4;&#x52A0;&#x51C6;&#x786E;&#x3002;CartoonGAN&#x7684;&#x4F18;&#x70B9;&#x662F;&#x80FD;&#x591F;&#x5C06;&#x771F;&#x5B9E;&#x7167;&#x7247;&#x8F6C;&#x6362;&#x4E3A;&#x5361;&#x901A;&#x98CE;&#x683C;&#x7684;&#x56FE;&#x50CF;&#xFF0C;&#x5177;&#x6709;&#x5E7F;&#x6CDB;&#x7684;&#x5E94;&#x7528;&#x524D;&#x666F;&#x3002;<br>
&#x4E0E;&#x751F;&#x6210;&#x5668;&#x7F51;&#x7EDC;&#x4E92;&#x8865;&#x7684;&#x662F;&#xFF0C;&#x5224;&#x522B;&#x5668;&#x7F51;&#x7EDC;D&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x8F93;&#x5165;&#x56FE;&#x50CF;&#x662F;&#x5426;&#x4E3A;&#x771F;&#x5B9E;&#x5361;&#x901A;&#x56FE;&#x50CF;&#x3002;&#x7531;&#x4E8E;&#x5224;&#x65AD;&#x56FE;&#x50CF;&#x662F;&#x5426;&#x4E3A;&#x5361;&#x901A;&#x662F;&#x4E00;&#x9879;&#x8981;&#x6C42;&#x8F83;&#x4F4E;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5E38;&#x89C4;&#x7684;&#x5168;&#x56FE;&#x50CF;&#x5224;&#x522B;&#x5668;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x5728;D&#x4E2D;&#x4F7F;&#x7528;&#x5E26;&#x6709;&#x8F83;&#x5C11;&#x53C2;&#x6570;&#x7684;&#x7B80;&#x5355;patch&#x7EA7;&#x522B;&#x7684;&#x5224;&#x522B;&#x5668;&#x3002;&#x4E0E;&#x5BF9;&#x8C61;&#x5206;&#x7C7B;&#x4E0D;&#x540C;&#xFF0C;&#x5361;&#x901A;&#x98CE;&#x683C;&#x5224;&#x522B;&#x4F9D;&#x8D56;&#x4E8E;&#x56FE;&#x50CF;&#x7684;&#x5C40;&#x90E8;&#x7279;&#x5F81;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x7F51;&#x7EDC;D&#x88AB;&#x8BBE;&#x8BA1;&#x4E3A;&#x8F83;&#x6D45;&#x3002;&#x5728;&#x5177;&#x6709;&#x5E73;&#x5766;&#x5C42;&#x7684;&#x9636;&#x6BB5;&#x4E4B;&#x540E;&#xFF0C;&#x8BE5;&#x7F51;&#x7EDC;&#x4F7F;&#x7528;&#x4E86;&#x4E24;&#x4E2A;&#x8DE8;&#x6B65;&#x5377;&#x79EF;&#x5757;&#x4EE5;&#x964D;&#x4F4E;&#x5206;&#x8FA8;&#x7387;&#x5E76;&#x7F16;&#x7801;&#x5206;&#x7C7B;&#x7684;&#x57FA;&#x672C;&#x5C40;&#x90E8;&#x7279;&#x5F81;&#x3002;<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p>
<p>&#x4E0B;&#x56FE;&#x662F;CartoonGAN&#x7ED3;&#x6784;&#x56FE;&#xFF1A;</p>
<p><img src="cartoonGAN.jpg" alt="img"></p>
<h4 class="mume-header" id="3-animegan">3. animeGAN</h4>

<p>&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;AnimeGAN &#x662F;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x751F;&#x6210;&#x5BF9;&#x6297;&#x6A21;&#x578B;&#xFF0C;&#x5177;&#x6709;&#x8F83;&#x5C11;&#x7684;&#x7F51;&#x7EDC;&#x53C2;&#x6570;&#xFF0C;&#x5E76;&#x5F15;&#x5165;&#x4E86;Gram&#x77E9;&#x9635;&#x6765;&#x751F;&#x6210;&#x66F4;&#x751F;&#x52A8;&#x7684;&#x98CE;&#x683C;&#x56FE;&#x50CF;&#x3002;<br>
&#x4E3A;&#x4E86;&#x751F;&#x6210;&#x66F4;&#x597D;&#x7684;&#x89C6;&#x89C9;&#x6548;&#x679C;&#x7684;&#x56FE;&#x50CF;&#xFF0C;&#x63D0;&#x51FA;&#x4E86;&#x4E09;&#x4E2A;&#x635F;&#x5931;&#x51FD;&#x6570;&#xFF1A;&#x7070;&#x5EA6;&#x6837;&#x5F0F;&#x635F;&#x5931;(grayscale style loss)&#x3001;&#x989C;&#x8272;&#x91CD;&#x5EFA;&#x635F;&#x5931;(color reconstruction loss)&#x548C;&#x7070;&#x5EA6;&#x5BF9;&#x6297;&#x635F;&#x5931;(grayscale adversarial loss)&#x3002;&#x5728;&#x751F;&#x6210;&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x7070;&#x5EA6;&#x98CE;&#x683C;&#x635F;&#x5931;&#x548C;&#x989C;&#x8272;&#x91CD;&#x5EFA;&#x635F;&#x5931;&#x4F7F;&#x751F;&#x6210;&#x7684;&#x56FE;&#x50CF;&#x5177;&#x6709;&#x66F4;&#x660E;&#x663E;&#x7684;&#x52A8;&#x6F2B;&#x98CE;&#x683C;&#xFF0C;&#x5E76;&#x4FDD;&#x7559;&#x4E86;&#x7167;&#x7247;&#x7684;&#x989C;&#x8272;&#x3002;&#x8BC6;&#x522B;&#x7F51;&#x7EDC;&#x4E2D;&#x7684;&#x7070;&#x5EA6;&#x5BF9;&#x6297;&#x635F;&#x5931;&#x4F7F;&#x751F;&#x6210;&#x7684;&#x56FE;&#x50CF;&#x5177;&#x6709;&#x9C9C;&#x660E;&#x7684;&#x8272;&#x5F69;&#x3002;&#x5728;&#x9274;&#x522B;&#x5668;&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x4F7F;&#x7528;&#x4E86; CartoonGAN &#x63D0;&#x51FA;&#x7684;&#x4FC3;&#x8FDB;&#x8FB9;&#x7F18;&#x7684;&#x5BF9;&#x6297;&#x635F;&#x5931;&#xFF08;edge-promoting adversarial loss&#xFF09;&#x6765;&#x4FDD;&#x7559;&#x6E05;&#x6670;&#x7684;&#x8FB9;&#x7F18;&#x3002;<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup><br>
&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#x4E3A;&#x4E86;&#x751F;&#x6210;&#x9AD8;&#x8D28;&#x91CF;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x5E76;&#x4E14;&#x7A33;&#x5B9A;&#x8BAD;&#x7EC3;&#xFF0C;&#x6211;&#x4EEC;&#x91C7;&#x7528;&#x4E86;LSGAN&#x7684;&#x6700;&#x5C0F;&#x4E8C;&#x4E58;&#x635F;&#x5931;&#x51FD;&#x6570;(least squares loss)&#x4F5C;&#x4E3A;&#x5BF9;&#x6297;&#x635F;&#x5931; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mrow><mi>a</mi><mi>d</mi><mi>v</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L_{adv}(G,D)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span>&#x3002;<br>
content loss&#x7C7B;&#x4F3C;&#x4E8E;CartoonGAN:<br>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>L</mi><mrow><mi>c</mi><mi>o</mi><mi>n</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>E</mi><mrow><msub><mi>p</mi><mi>i</mi></msub><mo>&#x223C;</mo><msub><mi>S</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi mathvariant="normal">&#x2225;</mi><mi>V</mi><mi>G</mi><msub><mi>G</mi><mi>l</mi></msub><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>&#x2212;</mo><mi>V</mi><mi>G</mi><msub><mi>G</mi><mi>l</mi></msub><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><msub><mi mathvariant="normal">&#x2225;</mi><mn>1</mn></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">L_{con}(G,D)=E_{p_i\sim S_{data}(p)}[\Vert VGG_l(p_i)-VGG_l(G(p_i)) \Vert_1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mrel mtight">&#x223C;</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0576em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord">&#x2225;</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord mathnormal">G</span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">&#x2212;</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord mathnormal">G</span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span><span class="mord"><span class="mord">&#x2225;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></span><br>
&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;grayscale style loss&#x4FC3;&#x4F7F;&#x7F51;&#x7EDC;&#x751F;&#x6210;&#x7684;&#x56FE;&#x50CF;&#x62E5;&#x6709;&#x52A8;&#x6F2B;&#x98CE;&#x683C;&#x7684;&#x7EB9;&#x7406;&#x548C;&#x7EBF;&#x6761;&#xFF0C;&#x5206;&#x522B;&#x8BA1;&#x7B97;&#x751F;&#x6210;&#x56FE;&#x50CF;&#x548C;&#x8BAD;&#x7EC3;&#x4E4B;&#x524D;&#x5F97;&#x5230;&#x52A8;&#x6F2B;&#x7070;&#x5EA6;&#x56FE;&#x7247;&#x7684;Gram matrix&#xFF0C;&#x7136;&#x540E;&#x8BA1;&#x7B97;&#x4E8C;&#x8005;&#x7684;L1 loss&#xFF1A;<br>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>L</mi><mrow><mi>g</mi><mi>r</mi><mi>a</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>E</mi><mrow><msub><mi>p</mi><mi>i</mi></msub><mo>&#x223C;</mo><msub><mi>S</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow></msub><mo separator="true">,</mo><msub><mi>E</mi><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>&#x223C;</mo><msub><mi>S</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi mathvariant="normal">&#x2225;</mi><mi>G</mi><mi>r</mi><mi>a</mi><mi>m</mi><mo stretchy="false">(</mo><mi>V</mi><mi>G</mi><msub><mi>G</mi><mi>l</mi></msub><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>&#x2212;</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>m</mi><mo stretchy="false">(</mo><mi>V</mi><mi>G</mi><msub><mi>G</mi><mi>l</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><msub><mi mathvariant="normal">&#x2225;</mi><mn>1</mn></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">L_{gra}(G,D)=E_{p_i\sim S_{data}(p)},E_{x_i\sim S_{data}(x)}[\Vert Gram(VGG_l(G(p_i)))-Gram(VGG_l(x_i))\Vert_1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mrel mtight">&#x223C;</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0576em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mrel mtight">&#x223C;</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0576em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord">&#x2225;</span><span class="mord mathnormal">G</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">am</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord mathnormal">G</span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)))</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">&#x2212;</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">G</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">am</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mord mathnormal">G</span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span><span class="mord"><span class="mord">&#x2225;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></span></p>
<p>color reconstruction loss&#x6765;&#x8BA9;&#x751F;&#x6210;&#x56FE;&#x50CF;&#x6709;&#x539F;&#x56FE;&#x7684;&#x8272;&#x5F69;&#x3002;&#x5C06;RGB&#x56FE;&#x8F6C;&#x6362;&#x4E3A;YUV&#xFF0C;&#x5206;&#x522B;&#x8BA1;&#x7B97;&#x751F;&#x6210;&#x56FE;&#x50CF;&#x548C;&#x771F;&#x5B9E;&#x56FE;&#x50CF;Y&#x3001;U&#x3001;V&#x4E09;&#x4E2A;&#x5206;&#x91CF;&#x7684;&#x635F;&#x5931;&#xFF1A;<br>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>L</mi><mrow><mi>c</mi><mi>o</mi><mi>l</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>E</mi><mrow><msub><mi>p</mi><mi>i</mi></msub><mo>&#x223C;</mo><msub><mi>S</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi mathvariant="normal">&#x2225;</mi><mi>Y</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>&#x2212;</mo><mi>Y</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><msub><mi mathvariant="normal">&#x2225;</mi><mn>1</mn></msub><mo>+</mo><mi mathvariant="normal">&#x2225;</mi><mi>U</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>&#x2212;</mo><mi>U</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><msub><mi mathvariant="normal">&#x2225;</mi><mi>H</mi></msub><mo>+</mo><mi mathvariant="normal">&#x2225;</mi><mi>V</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>&#x2212;</mo><mi>V</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><msub><mi mathvariant="normal">&#x2225;</mi><mi>H</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">L_{col}(G,D)=E_{p_i\sim S_{data}(p)}[\Vert Y(G(p_i))-Y(p_i)\Vert_1+\Vert U(G(p_i))-U(p_i)\Vert_H+\Vert V(G(p_i))-V(p_i)\Vert_H]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mrel mtight">&#x223C;</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0576em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord">&#x2225;</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">&#x2212;</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord">&#x2225;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">&#x2225;</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">&#x2212;</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord">&#x2225;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">&#x2225;</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">&#x2212;</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord">&#x2225;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.08125em;">H</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></span><br>
&#x6574;&#x4F53;&#x635F;&#x5931;&#x51FD;&#x6570;&#x4E3A;&#xFF1A;<br>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>&#x3C9;</mi><mrow><mi>a</mi><mi>d</mi><mi>v</mi></mrow></msub><msub><mi>L</mi><mrow><mi>a</mi><mi>d</mi><mi>v</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>&#x3C9;</mi><mrow><mi>c</mi><mi>o</mi><mi>n</mi></mrow></msub><msub><mi>L</mi><mrow><mi>c</mi><mi>o</mi><mi>n</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>&#x3C9;</mi><mrow><mi>g</mi><mi>r</mi><mi>a</mi></mrow></msub><msub><mi>L</mi><mrow><mi>g</mi><mi>r</mi><mi>a</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>&#x3C9;</mi><mrow><mi>c</mi><mi>o</mi><mi>l</mi></mrow></msub><msub><mi>L</mi><mrow><mi>c</mi><mi>o</mi><mi>l</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L(G,D)=\omega_{adv}L_{adv}(G,D)+\omega_{con}L_{con}(G,D)+\omega_{gra}L_{gra}(G,D)+\omega_{col}L_{col}(G,D)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">&#x3C9;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">&#x3C9;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">&#x3C9;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">&#x3C9;</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span></span><br>
&#x751F;&#x6210;&#x5668;&#x7684;&#x635F;&#x5931;&#x51FD;&#x6570;&#x4E3A;&#xFF1A;<br>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mrow><mi>a</mi><mi>d</mi><mi>v</mi></mrow></msub><msub><mi>E</mi><mrow><msub><mi>p</mi><mi>i</mi></msub><mo>&#x223C;</mo><msub><mi>S</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow></msub></mrow></msub><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>&#x2212;</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">]</mo><mo>+</mo><msub><mi>w</mi><mrow><mi>c</mi><mi>o</mi><mi>n</mi></mrow></msub><msub><mi>L</mi><mrow><mi>c</mi><mi>o</mi><mi>n</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>w</mi><mrow><mi>g</mi><mi>r</mi><mi>a</mi></mrow></msub><msub><mi>L</mi><mrow><mi>g</mi><mi>r</mi><mi>a</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>w</mi><mrow><mi>c</mi><mi>o</mi><mi>l</mi></mrow></msub><msub><mi>L</mi><mrow><mi>c</mi><mi>o</mi><mi>l</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L(G) = w_{adv}E_{p_i \sim S_{data(p)}}[(G(p_i) - 1)^2] + w_{con}L_{con}(G, D) + w_{gra}L_{gra}(G, D) +w_{col}L_{col}(G, D)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1586em;vertical-align:-0.4086em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mrel mtight">&#x223C;</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.0576em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5357em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.3695em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.4086em;"><span></span></span></span></span></span></span><span class="mopen">[(</span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">&#x2212;</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">co</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span></span><br>
&#x5224;&#x522B;&#x5668;&#x7684;&#x635F;&#x5931;&#x51FD;&#x6570;&#x4E3A;&#xFF1A;<br>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><mi>D</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mrow><mi>a</mi><mi>d</mi><mi>v</mi></mrow></msub><mo stretchy="false">[</mo><msub><mi>E</mi><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>&#x223C;</mo><msub><mi>S</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow></msub></mrow></msub><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mi>D</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>&#x2212;</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">]</mo><mo>+</mo><msub><mi>E</mi><mrow><mi>p</mi><mi>i</mi><mo>&#x223C;</mo><msub><mi>S</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow></msub></mrow></msub><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mi>D</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">]</mo><mo>+</mo><msub><mi>E</mi><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>&#x223C;</mo><msub><mi>S</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mi>D</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">]</mo><mo>+</mo><mn>0.1</mn><msub><mi>E</mi><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>&#x223C;</mo><msub><mi>S</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></msub></mrow></msub><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mi>D</mi><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">]</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">L(D)= w_{adv}[E_{a_i\sim S_{data(a)}}[(D(a_i) - 1)^2] + E_{pi\sim S_{data(p)}}[(D(G(p_i)))^2] + E_{x_i\sim S_{data}(x)}[(D(G(p_i)))^2] + 0.1E_{y_i\sim S_{data(y)}}[(D(G(y_i)))^2]]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1586em;vertical-align:-0.4086em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mrel mtight">&#x223C;</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.0576em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5357em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">a</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.3695em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.4086em;"><span></span></span></span></span></span></span><span class="mopen">[(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">&#x2212;</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2727em;vertical-align:-0.4086em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">i</span><span class="mrel mtight">&#x223C;</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.0576em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5357em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.3695em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.4086em;"><span></span></span></span></span></span></span><span class="mopen">[(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2193em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mrel mtight">&#x223C;</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0576em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">[(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2727em;vertical-align:-0.4086em;"></span><span class="mord">0.1</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mrel mtight">&#x223C;</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.0576em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5357em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">a</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.3695em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.4086em;"><span></span></span></span></span></span></span><span class="mopen">[(</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">&#x200B;</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">]]</span></span></span></span></span></p>
<p>&#x4EE5;&#x4E0B;&#x662F;animeGAN&#x7684;&#x751F;&#x6210;&#x5668;&#x548C;&#x5224;&#x522B;&#x5668;&#x7684;&#x7F51;&#x7EDC;&#x7ED3;&#x6784;&#x56FE;&#xFF1A;</p>
<p><img src="animeGAN1.png" alt="img"><br>
&#x751F;&#x6210;&#x5668;&#x7684;&#x7F51;&#x7EDC;&#x53EF;&#x4EE5;&#x770B;&#x4F5C;&#x662F;&#x7F16;&#x7801;&#x5668;-&#x89E3;&#x7801;&#x5668;&#x7F51;&#x7EDC;&#x3002;&#x5176;&#x4E2D;&#x4E3B;&#x8981;&#x7684;&#x6A21;&#x5757;&#x6709;&#x6807;&#x51C6;&#x5377;&#x79EF;&#x3001;&#x6DF1;&#x5EA6;&#x53EF;&#x5206;&#x79BB;&#x5377;&#x79EF;&#x3001;&#x6B8B;&#x5DEE;&#x7F51;&#x7EDC;&#x3001;&#x4E0A;&#x91C7;&#x6837;&#x548C;&#x4E0B;&#x91C7;&#x6837;&#x6A21;&#x5757;<br>
<img src="animeGAN2.png" alt="img"></p>
<h3 class="mume-header" id="%E4%BA%8C-configuration">&#x4E8C;&#x3001;Configuration</h3>

<h4 class="mume-header" id="requirements">Requirements</h4>

<ul>
<li>python &gt;= 3.9.0</li>
<li>torch &gt;= 1.7.1</li>
<li>tensorflow compat 1.x 2.x</li>
<li>opencv</li>
<li>tqdm</li>
<li>numpy</li>
<li>glob</li>
<li>argparse</li>
<li>dlib</li>
<li>pillow</li>
<li>matplotlib</li>
</ul>
<h4 class="mume-header" id="structure">Structure</h4>

<p>&#x251C;&#x2500;checkpoint            &#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;         // &#x4FDD;&#x5B58;&#x6A21;&#x578B;&#x6587;&#x4EF6;<br>
&#x251C;&#x2500;dataset&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;// &#x8BAD;&#x7EC3;&#x6570;&#x636E;<br>
&#x251C;&#x2500;net &#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0;       // &#x7F51;&#x7EDC;&#x6A21;&#x578B;<br>
&#x251C;&#x2500;res&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;// &#x8D44;&#x6E90;&#x6587;&#x4EF6;<br>
&#x2502;  &#x251C;&#x2500;image<br>
&#x2502;  &#x2514;&#x2500;video<br>
&#x251C;&#x2500;tools         nbsp; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0;              // &#x5DE5;&#x5177;&#x5305;<br>
&#x2502; &#xA0;&#xA0;<a href="http://model.py">model.py</a>  nbsp; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0;       // animeGAN&#x6A21;&#x578B;<br>
&#x2502; &#xA0;&#xA0;<a href="http://train.py">train.py</a>     nbsp; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;      // &#x6A21;&#x578B;&#x8BAD;&#x7EC3;<br>
&#x2502; &#xA0;&#xA0;test.pynbsp; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;// &#x6A21;&#x578B;&#x6D4B;&#x8BD5;<br>
&#x2502; &#xA0;&#xA0;video_stylized.pynbsp; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;// &#x89C6;&#x9891;&#x52A8;&#x6F2B;&#x5316;<br>
&#x2502; &#xA0;&#xA0;face_stylized.ipynbnbsp; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; &#xA0;&#xA0;&#xA0;// &#x4EBA;&#x8138;&#x52A8;&#x6F2B;&#x5316;<br>
&#x2514;&#x2500;  shape_predictor_68_face_landmarks.dat &#xA0; &#xA0;//&#x4EBA;&#x8138;&#x7279;&#x5F81;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x5E93;</p>
<h3 class="mume-header" id="%E4%B8%89-process-and-results">&#x4E09;&#x3001;Process and Results</h3>

<h4 class="mume-header" id="model-construction">Model construction</h4>

<p><strong>1.&#x751F;&#x6210;&#x5668;&#x548C;&#x5224;&#x522B;&#x5668;</strong><br>
&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#x751F;&#x6210;&#x5668;&#x7F51;&#x7EDC;&#x662F;&#x4E00;&#x4E2A;&#x7F16;&#x7801;&#x5668;-&#x89E3;&#x7801;&#x5668;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x5176;&#x4E2D;&#x9664;&#x4E86;&#x6807;&#x51C6;&#x5377;&#x79EF;&#x5916;&#xFF0C;&#x6709;&#x6DF1;&#x5EA6;&#x53EF;&#x5206;&#x79BB;&#x5377;&#x79EF;&#xFF0C;&#x5012;&#x7F6E;&#x6B8B;&#x5DEE;&#x7F51;&#x7EDC;&#xFF0C;&#x4E0A;&#x91C7;&#x6837;&#x548C;&#x4E0B;&#x91C7;&#x6837;&#x6A21;&#x5757;&#x3002;</p>
<details><summary>&#x6DF1;&#x5EA6;&#x53EF;&#x5206;&#x79BB;&#x5377;&#x79EF;</summary>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword keyword-def">def</span> <span class="token function">dwise_conv</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> k_h<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> k_w<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> channel_multiplier<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> strides<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
               padding<span class="token operator">=</span><span class="token string">&apos;VALID&apos;</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">&apos;dwise_conv&apos;</span><span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">input</span> <span class="token operator">=</span> tf<span class="token punctuation">.</span>pad<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">&quot;REFLECT&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>variable_scope<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        in_channel <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">.</span>get_shape<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>as_list<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        w <span class="token operator">=</span> tf<span class="token punctuation">.</span>get_variable<span class="token punctuation">(</span><span class="token string">&apos;w&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>k_h<span class="token punctuation">,</span> k_w<span class="token punctuation">,</span> in_channel<span class="token punctuation">,</span> channel_multiplier<span class="token punctuation">]</span><span class="token punctuation">,</span>
                            regularizer<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> initializer<span class="token operator">=</span>tf_layers<span class="token punctuation">.</span>variance_scaling_initializer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        conv <span class="token operator">=</span> tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>depthwise_conv2d<span class="token punctuation">(</span>
            <span class="token builtin">input</span><span class="token punctuation">,</span> w<span class="token punctuation">,</span> strides<span class="token punctuation">,</span> padding<span class="token punctuation">,</span> rate<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> name<span class="token operator">=</span>name<span class="token punctuation">,</span> data_format<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-if">if</span> bias<span class="token punctuation">:</span>
            biases <span class="token operator">=</span> tf<span class="token punctuation">.</span>get_variable<span class="token punctuation">(</span>
                <span class="token string">&apos;bias&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>in_channel <span class="token operator">*</span> channel_multiplier<span class="token punctuation">]</span><span class="token punctuation">,</span> initializer<span class="token operator">=</span>tf<span class="token punctuation">.</span>constant_initializer<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            conv <span class="token operator">=</span> tf<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>bias_add<span class="token punctuation">(</span>conv<span class="token punctuation">,</span> biases<span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> conv
</pre></details>
<details><summary>&#x5012;&#x7F6E;&#x6B8B;&#x5DEE;&#x7F51;&#x7EDC;</summary>
<pre data-role="codeBlock" data-info="python" class="language-python">    <span class="token keyword keyword-def">def</span> <span class="token function">InvertedRes_block</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token punctuation">,</span> expansion_ratio<span class="token punctuation">,</span> output_dim<span class="token punctuation">,</span> stride<span class="token punctuation">,</span> name<span class="token punctuation">,</span> reuse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> bias<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>variable_scope<span class="token punctuation">(</span>name<span class="token punctuation">,</span> reuse<span class="token operator">=</span>reuse<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># pw</span>
            bottleneck_dim <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span>
                expansion_ratio <span class="token operator">*</span> <span class="token builtin">input</span><span class="token punctuation">.</span>get_shape<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>as_list<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            net <span class="token operator">=</span> Conv2DNormLReLU<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> bottleneck_dim<span class="token punctuation">,</span>
                                  kernel_size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> Use_bias<span class="token operator">=</span>bias<span class="token punctuation">)</span>

            <span class="token comment"># dw</span>
            net <span class="token operator">=</span> dwise_conv<span class="token punctuation">(</span>net<span class="token punctuation">,</span> name<span class="token operator">=</span>name<span class="token punctuation">)</span>
            net <span class="token operator">=</span> layer_norm<span class="token punctuation">(</span>net<span class="token punctuation">,</span> scope<span class="token operator">=</span><span class="token string">&apos;1&apos;</span><span class="token punctuation">)</span>
            net <span class="token operator">=</span> lrelu<span class="token punctuation">(</span>net<span class="token punctuation">)</span>

            <span class="token comment"># pw &amp; linear</span>
            net <span class="token operator">=</span> Conv2D<span class="token punctuation">(</span>net<span class="token punctuation">,</span> output_dim<span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
            net <span class="token operator">=</span> layer_norm<span class="token punctuation">(</span>net<span class="token punctuation">,</span> scope<span class="token operator">=</span><span class="token string">&apos;2&apos;</span><span class="token punctuation">)</span>

            <span class="token comment"># element wise add, only for stride==1</span>
            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">.</span>get_shape<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>as_list<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> output_dim<span class="token punctuation">)</span> <span class="token keyword keyword-and">and</span> stride <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
                net <span class="token operator">=</span> <span class="token builtin">input</span> <span class="token operator">+</span> net

            <span class="token keyword keyword-return">return</span> net
</pre></details>
<details><summary>&#x4E0A;&#x91C7;&#x6837;&#x6A21;&#x5757;</summary>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword keyword-def">def</span> <span class="token function">Unsample</span><span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> filters<span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    new_H<span class="token punctuation">,</span> new_W <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> tf<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>inputs<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> tf<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>inputs<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
    inputs <span class="token operator">=</span> tf<span class="token punctuation">.</span>image<span class="token punctuation">.</span>resize_images<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token punctuation">[</span>new_H<span class="token punctuation">,</span> new_W<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword keyword-return">return</span> Conv2DNormLReLU<span class="token punctuation">(</span>filters<span class="token operator">=</span>filters<span class="token punctuation">,</span> kernel_size<span class="token operator">=</span>kernel_size<span class="token punctuation">,</span> inputs<span class="token operator">=</span>inputs<span class="token punctuation">)</span>
</pre></details>
<details><summary>&#x4E0B;&#x91C7;&#x6837;&#x6A21;&#x5757;</summary>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword keyword-def">def</span> <span class="token function">Downsample</span><span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> filters<span class="token operator">=</span><span class="token number">256</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    new_H<span class="token punctuation">,</span> new_W <span class="token operator">=</span> tf<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>inputs<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> tf<span class="token punctuation">.</span>shape<span class="token punctuation">(</span>inputs<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">//</span> <span class="token number">2</span>
    inputs <span class="token operator">=</span> tf<span class="token punctuation">.</span>image<span class="token punctuation">.</span>resize_images<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token punctuation">[</span>new_H<span class="token punctuation">,</span> new_W<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword keyword-return">return</span> Separable_conv2d<span class="token punctuation">(</span>filters<span class="token operator">=</span>filters<span class="token punctuation">,</span> kernel_size<span class="token operator">=</span>kernel_size<span class="token punctuation">,</span> inputs<span class="token operator">=</span>inputs<span class="token punctuation">)</span>
</pre></details>
<details><summary>&#x751F;&#x6210;&#x5668;&#x7F51;&#x7EDC;&#x7ED3;&#x6784;</summary>
<pre data-role="codeBlock" data-info="python" class="language-python">            <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>variable_scope<span class="token punctuation">(</span><span class="token string">&apos;A&apos;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                inputs <span class="token operator">=</span> Conv2DNormLReLU<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
                inputs <span class="token operator">=</span> Conv2DNormLReLU<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> strides<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
                inputs <span class="token operator">=</span> Conv2DNormLReLU<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>

            <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>variable_scope<span class="token punctuation">(</span><span class="token string">&apos;B&apos;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                inputs <span class="token operator">=</span> Conv2DNormLReLU<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> strides<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
                inputs <span class="token operator">=</span> Conv2DNormLReLU<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>

            <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>variable_scope<span class="token punctuation">(</span><span class="token string">&apos;C&apos;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                inputs <span class="token operator">=</span> Conv2DNormLReLU<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>
                inputs <span class="token operator">=</span> self<span class="token punctuation">.</span>InvertedRes_block<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&apos;r1&apos;</span><span class="token punctuation">)</span>
                inputs <span class="token operator">=</span> self<span class="token punctuation">.</span>InvertedRes_block<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&apos;r2&apos;</span><span class="token punctuation">)</span>
                inputs <span class="token operator">=</span> self<span class="token punctuation">.</span>InvertedRes_block<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&apos;r3&apos;</span><span class="token punctuation">)</span>
                inputs <span class="token operator">=</span> self<span class="token punctuation">.</span>InvertedRes_block<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&apos;r4&apos;</span><span class="token punctuation">)</span>
                inputs <span class="token operator">=</span> Conv2DNormLReLU<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>

            <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>variable_scope<span class="token punctuation">(</span><span class="token string">&apos;D&apos;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                inputs <span class="token operator">=</span> Unsample<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>
                inputs <span class="token operator">=</span> Conv2DNormLReLU<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>

            <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>variable_scope<span class="token punctuation">(</span><span class="token string">&apos;E&apos;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                inputs <span class="token operator">=</span> Unsample<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
                inputs <span class="token operator">=</span> Conv2DNormLReLU<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
                inputs <span class="token operator">=</span> Conv2DNormLReLU<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>variable_scope<span class="token punctuation">(</span><span class="token string">&apos;out_layer&apos;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                out <span class="token operator">=</span> Conv2D<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> filters<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> strides<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>fake <span class="token operator">=</span> tf<span class="token punctuation">.</span>tanh<span class="token punctuation">(</span>out<span class="token punctuation">)</span>
</pre></details>
&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#x800C;&#x5224;&#x522B;&#x5668;&#x53EA;&#x9700;&#x8981;&#x5BF9;&#x751F;&#x6210;&#x5668;&#x751F;&#x6210;&#x7684;&#x6A21;&#x578B;&#x8FDB;&#x884C;&#x5224;&#x522B;&#xFF0C;&#x56E0;&#x6B64;&#x4F7F;&#x7528;&#x4F20;&#x7EDF;&#x7684;CNN&#x7F51;&#x7EDC;&#x5373;&#x53EF;
&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#x4EE5;&#x4E0A;&#x4F7F;&#x7528;&#x7684;&#x751F;&#x6210;&#x5668;&#x548C;&#x5224;&#x522B;&#x5668;&#x7F51;&#x7EDC;&#x6784;&#x5EFA;&#x4F4D;&#x4E8E;./net&#x6587;&#x4EF6;&#x5939;&#x7684;generator.py &#x548C; discriminator.py &#x6587;&#x4EF6;&#x4E2D; 
<p><strong>2.&#x6A21;&#x578B;&#x642D;&#x5EFA;</strong></p>
<details><summary>&#x6A21;&#x578B;&#x521D;&#x59CB;&#x5316;</summary>
<pre data-role="codeBlock" data-info="python" class="language-python">    <span class="token keyword keyword-def">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sess<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>model_name <span class="token operator">=</span> <span class="token string">&apos;AnimeGANv2&apos;</span>
        self<span class="token punctuation">.</span>sess <span class="token operator">=</span> sess
        self<span class="token punctuation">.</span>checkpoint_dir <span class="token operator">=</span> args<span class="token punctuation">.</span>checkpoint_dir
        self<span class="token punctuation">.</span>log_dir <span class="token operator">=</span> args<span class="token punctuation">.</span>log_dir
        self<span class="token punctuation">.</span>dataset_name <span class="token operator">=</span> args<span class="token punctuation">.</span>dataset

        self<span class="token punctuation">.</span>epoch <span class="token operator">=</span> args<span class="token punctuation">.</span>epoch
        self<span class="token punctuation">.</span>init_epoch <span class="token operator">=</span> args<span class="token punctuation">.</span>init_epoch <span class="token comment"># args.epoch // 20</span>

        self<span class="token punctuation">.</span>gan_type <span class="token operator">=</span> args<span class="token punctuation">.</span>gan_type
        self<span class="token punctuation">.</span>batch_size <span class="token operator">=</span> args<span class="token punctuation">.</span>batch_size
        self<span class="token punctuation">.</span>save_freq <span class="token operator">=</span> args<span class="token punctuation">.</span>save_freq

        self<span class="token punctuation">.</span>init_lr <span class="token operator">=</span> args<span class="token punctuation">.</span>init_lr
        self<span class="token punctuation">.</span>d_lr <span class="token operator">=</span> args<span class="token punctuation">.</span>d_lr
        self<span class="token punctuation">.</span>g_lr <span class="token operator">=</span> args<span class="token punctuation">.</span>g_lr

        <span class="token triple-quoted-string string">&quot;&quot;&quot; Weight &quot;&quot;&quot;</span>
        self<span class="token punctuation">.</span>g_adv_weight <span class="token operator">=</span> args<span class="token punctuation">.</span>g_adv_weight
        self<span class="token punctuation">.</span>d_adv_weight <span class="token operator">=</span> args<span class="token punctuation">.</span>d_adv_weight
        self<span class="token punctuation">.</span>con_weight <span class="token operator">=</span> args<span class="token punctuation">.</span>con_weight
        self<span class="token punctuation">.</span>sty_weight <span class="token operator">=</span> args<span class="token punctuation">.</span>sty_weight
        self<span class="token punctuation">.</span>color_weight <span class="token operator">=</span> args<span class="token punctuation">.</span>color_weight
        self<span class="token punctuation">.</span>tv_weight <span class="token operator">=</span> args<span class="token punctuation">.</span>tv_weight

        self<span class="token punctuation">.</span>training_rate <span class="token operator">=</span> args<span class="token punctuation">.</span>training_rate
        self<span class="token punctuation">.</span>ld <span class="token operator">=</span> args<span class="token punctuation">.</span>ld

        self<span class="token punctuation">.</span>img_size <span class="token operator">=</span> args<span class="token punctuation">.</span>img_size
        self<span class="token punctuation">.</span>img_ch <span class="token operator">=</span> args<span class="token punctuation">.</span>img_ch

        <span class="token triple-quoted-string string">&quot;&quot;&quot; Discriminator &quot;&quot;&quot;</span>
        self<span class="token punctuation">.</span>n_dis <span class="token operator">=</span> args<span class="token punctuation">.</span>n_dis
        self<span class="token punctuation">.</span>ch <span class="token operator">=</span> args<span class="token punctuation">.</span>ch
        self<span class="token punctuation">.</span>sn <span class="token operator">=</span> args<span class="token punctuation">.</span>sn

        self<span class="token punctuation">.</span>sample_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>args<span class="token punctuation">.</span>sample_dir<span class="token punctuation">,</span> self<span class="token punctuation">.</span>model_dir<span class="token punctuation">)</span>
        check_folder<span class="token punctuation">(</span>self<span class="token punctuation">.</span>sample_dir<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>real <span class="token operator">=</span> tf<span class="token punctuation">.</span>placeholder<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>float32<span class="token punctuation">,</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>batch_size<span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_ch<span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">&apos;real_A&apos;</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>anime <span class="token operator">=</span> tf<span class="token punctuation">.</span>placeholder<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>float32<span class="token punctuation">,</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>batch_size<span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_ch<span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">&apos;anime_A&apos;</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>anime_smooth <span class="token operator">=</span> tf<span class="token punctuation">.</span>placeholder<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>float32<span class="token punctuation">,</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>batch_size<span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_ch<span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">&apos;anime_smooth_A&apos;</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>test_real <span class="token operator">=</span> tf<span class="token punctuation">.</span>placeholder<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>float32<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_ch<span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">&apos;test_input&apos;</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>anime_gray <span class="token operator">=</span> tf<span class="token punctuation">.</span>placeholder<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>float32<span class="token punctuation">,</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>batch_size<span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_ch<span class="token punctuation">]</span><span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&apos;anime_B&apos;</span><span class="token punctuation">)</span>


        self<span class="token punctuation">.</span>real_image_generator <span class="token operator">=</span> ImageGenerator<span class="token punctuation">(</span><span class="token string">&apos;./dataset/train_photo&apos;</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">,</span> self<span class="token punctuation">.</span>batch_size<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>anime_image_generator <span class="token operator">=</span> ImageGenerator<span class="token punctuation">(</span><span class="token string">&apos;./dataset/{}&apos;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>dataset_name <span class="token operator">+</span> <span class="token string">&apos;/style&apos;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">,</span> self<span class="token punctuation">.</span>batch_size<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>anime_smooth_generator <span class="token operator">=</span> ImageGenerator<span class="token punctuation">(</span><span class="token string">&apos;./dataset/{}&apos;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>dataset_name <span class="token operator">+</span> <span class="token string">&apos;/smooth&apos;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">,</span> self<span class="token punctuation">.</span>batch_size<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>dataset_num <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>real_image_generator<span class="token punctuation">.</span>num_images<span class="token punctuation">,</span> self<span class="token punctuation">.</span>anime_image_generator<span class="token punctuation">.</span>num_images<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>vgg <span class="token operator">=</span> Vgg19<span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre></details>
<details><summary>&#x6A21;&#x578B;&#x521B;&#x5EFA;</summary>
<pre data-role="codeBlock" data-info="python" class="language-python"> <span class="token keyword keyword-def">def</span> <span class="token function">build_model</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot; Define Generator, Discriminator &quot;&quot;&quot;</span>
        self<span class="token punctuation">.</span>generated <span class="token operator">=</span> self<span class="token punctuation">.</span>generator<span class="token punctuation">(</span>self<span class="token punctuation">.</span>real<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>test_generated <span class="token operator">=</span> self<span class="token punctuation">.</span>generator<span class="token punctuation">(</span>self<span class="token punctuation">.</span>test_real<span class="token punctuation">,</span> reuse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

        anime_logit <span class="token operator">=</span> self<span class="token punctuation">.</span>discriminator<span class="token punctuation">(</span>self<span class="token punctuation">.</span>anime<span class="token punctuation">)</span>
        anime_gray_logit <span class="token operator">=</span> self<span class="token punctuation">.</span>discriminator<span class="token punctuation">(</span>self<span class="token punctuation">.</span>anime_gray<span class="token punctuation">,</span> reuse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

        generated_logit <span class="token operator">=</span> self<span class="token punctuation">.</span>discriminator<span class="token punctuation">(</span>self<span class="token punctuation">.</span>generated<span class="token punctuation">,</span> reuse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        smooth_logit <span class="token operator">=</span> self<span class="token punctuation">.</span>discriminator<span class="token punctuation">(</span>self<span class="token punctuation">.</span>anime_smooth<span class="token punctuation">,</span> reuse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

        <span class="token triple-quoted-string string">&quot;&quot;&quot; Define Loss &quot;&quot;&quot;</span>
        <span class="token keyword keyword-if">if</span> self<span class="token punctuation">.</span>gan_type<span class="token punctuation">.</span>__contains__<span class="token punctuation">(</span><span class="token string">&apos;gp&apos;</span><span class="token punctuation">)</span> <span class="token keyword keyword-or">or</span> self<span class="token punctuation">.</span>gan_type<span class="token punctuation">.</span>__contains__<span class="token punctuation">(</span><span class="token string">&apos;lp&apos;</span><span class="token punctuation">)</span> <span class="token keyword keyword-or">or</span> self<span class="token punctuation">.</span>gan_type<span class="token punctuation">.</span>__contains__<span class="token punctuation">(</span><span class="token string">&apos;dragan&apos;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            GP <span class="token operator">=</span> self<span class="token punctuation">.</span>gradient_panalty<span class="token punctuation">(</span>real<span class="token operator">=</span>self<span class="token punctuation">.</span>anime<span class="token punctuation">,</span> fake<span class="token operator">=</span>self<span class="token punctuation">.</span>generated<span class="token punctuation">)</span>
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            GP <span class="token operator">=</span> <span class="token number">0.0</span>

        <span class="token comment"># init pharse</span>
        init_c_loss <span class="token operator">=</span> con_loss<span class="token punctuation">(</span>self<span class="token punctuation">.</span>vgg<span class="token punctuation">,</span> self<span class="token punctuation">.</span>real<span class="token punctuation">,</span> self<span class="token punctuation">.</span>generated<span class="token punctuation">)</span>
        init_loss <span class="token operator">=</span> self<span class="token punctuation">.</span>con_weight <span class="token operator">*</span> init_c_loss

        self<span class="token punctuation">.</span>init_loss <span class="token operator">=</span> init_loss

        <span class="token comment"># gan</span>
        c_loss<span class="token punctuation">,</span> s_loss <span class="token operator">=</span> con_sty_loss<span class="token punctuation">(</span>
            self<span class="token punctuation">.</span>vgg<span class="token punctuation">,</span> self<span class="token punctuation">.</span>real<span class="token punctuation">,</span> self<span class="token punctuation">.</span>anime_gray<span class="token punctuation">,</span> self<span class="token punctuation">.</span>generated<span class="token punctuation">)</span>
        tv_loss <span class="token operator">=</span> self<span class="token punctuation">.</span>tv_weight <span class="token operator">*</span> total_variation_loss<span class="token punctuation">(</span>self<span class="token punctuation">.</span>generated<span class="token punctuation">)</span>
        t_loss <span class="token operator">=</span> self<span class="token punctuation">.</span>con_weight <span class="token operator">*</span> c_loss <span class="token operator">+</span> self<span class="token punctuation">.</span>sty_weight <span class="token operator">*</span> s_loss <span class="token operator">+</span> \
            color_loss<span class="token punctuation">(</span>self<span class="token punctuation">.</span>real<span class="token punctuation">,</span> self<span class="token punctuation">.</span>generated<span class="token punctuation">)</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>color_weight <span class="token operator">+</span> tv_loss

        g_loss <span class="token operator">=</span> self<span class="token punctuation">.</span>g_adv_weight <span class="token operator">*</span> \
            generator_loss<span class="token punctuation">(</span>self<span class="token punctuation">.</span>gan_type<span class="token punctuation">,</span> generated_logit<span class="token punctuation">)</span>
        d_loss <span class="token operator">=</span> self<span class="token punctuation">.</span>d_adv_weight <span class="token operator">*</span> discriminator_loss<span class="token punctuation">(</span>
            self<span class="token punctuation">.</span>gan_type<span class="token punctuation">,</span> anime_logit<span class="token punctuation">,</span> anime_gray_logit<span class="token punctuation">,</span> generated_logit<span class="token punctuation">,</span> smooth_logit<span class="token punctuation">)</span> <span class="token operator">+</span> GP

        self<span class="token punctuation">.</span>Generator_loss <span class="token operator">=</span> t_loss <span class="token operator">+</span> g_loss
        self<span class="token punctuation">.</span>Discriminator_loss <span class="token operator">=</span> d_loss

        <span class="token triple-quoted-string string">&quot;&quot;&quot; Training &quot;&quot;&quot;</span>
        t_vars <span class="token operator">=</span> tf<span class="token punctuation">.</span>trainable_variables<span class="token punctuation">(</span><span class="token punctuation">)</span>
        G_vars <span class="token operator">=</span> <span class="token punctuation">[</span>var <span class="token keyword keyword-for">for</span> var <span class="token keyword keyword-in">in</span> t_vars <span class="token keyword keyword-if">if</span> <span class="token string">&apos;generator&apos;</span> <span class="token keyword keyword-in">in</span> var<span class="token punctuation">.</span>name<span class="token punctuation">]</span>
        D_vars <span class="token operator">=</span> <span class="token punctuation">[</span>var <span class="token keyword keyword-for">for</span> var <span class="token keyword keyword-in">in</span> t_vars <span class="token keyword keyword-if">if</span> <span class="token string">&apos;discriminator&apos;</span> <span class="token keyword keyword-in">in</span> var<span class="token punctuation">.</span>name<span class="token punctuation">]</span>

        self<span class="token punctuation">.</span>init_optim <span class="token operator">=</span> tf<span class="token punctuation">.</span>train<span class="token punctuation">.</span>AdamOptimizer<span class="token punctuation">(</span>
            self<span class="token punctuation">.</span>init_lr<span class="token punctuation">,</span> beta1<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> beta2<span class="token operator">=</span><span class="token number">0.999</span><span class="token punctuation">)</span><span class="token punctuation">.</span>minimize<span class="token punctuation">(</span>self<span class="token punctuation">.</span>init_loss<span class="token punctuation">,</span> var_list<span class="token operator">=</span>G_vars<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>G_optim <span class="token operator">=</span> tf<span class="token punctuation">.</span>train<span class="token punctuation">.</span>AdamOptimizer<span class="token punctuation">(</span>self<span class="token punctuation">.</span>g_lr<span class="token punctuation">,</span> beta1<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> beta2<span class="token operator">=</span><span class="token number">0.999</span><span class="token punctuation">)</span><span class="token punctuation">.</span>minimize<span class="token punctuation">(</span>
            self<span class="token punctuation">.</span>Generator_loss<span class="token punctuation">,</span> var_list<span class="token operator">=</span>G_vars<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>D_optim <span class="token operator">=</span> tf<span class="token punctuation">.</span>train<span class="token punctuation">.</span>AdamOptimizer<span class="token punctuation">(</span>self<span class="token punctuation">.</span>d_lr<span class="token punctuation">,</span> beta1<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> beta2<span class="token operator">=</span><span class="token number">0.999</span><span class="token punctuation">)</span><span class="token punctuation">.</span>minimize<span class="token punctuation">(</span>
            self<span class="token punctuation">.</span>Discriminator_loss<span class="token punctuation">,</span> var_list<span class="token operator">=</span>D_vars<span class="token punctuation">)</span>

        <span class="token triple-quoted-string string">&quot;&quot;&quot;&quot; Summary &quot;&quot;&quot;</span>
        self<span class="token punctuation">.</span>G_loss <span class="token operator">=</span> tf<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>scalar<span class="token punctuation">(</span><span class="token string">&quot;Generator_loss&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>Generator_loss<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>D_loss <span class="token operator">=</span> tf<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>scalar<span class="token punctuation">(</span>
            <span class="token string">&quot;Discriminator_loss&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>Discriminator_loss<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>G_gan <span class="token operator">=</span> tf<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>scalar<span class="token punctuation">(</span><span class="token string">&quot;G_gan&quot;</span><span class="token punctuation">,</span> g_loss<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>G_vgg <span class="token operator">=</span> tf<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>scalar<span class="token punctuation">(</span><span class="token string">&quot;G_vgg&quot;</span><span class="token punctuation">,</span> t_loss<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>G_init_loss <span class="token operator">=</span> tf<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>scalar<span class="token punctuation">(</span><span class="token string">&quot;G_init&quot;</span><span class="token punctuation">,</span> init_loss<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>V_loss_merge <span class="token operator">=</span> tf<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>G_init_loss<span class="token punctuation">]</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>G_loss_merge <span class="token operator">=</span> tf<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>
            <span class="token punctuation">[</span>self<span class="token punctuation">.</span>G_loss<span class="token punctuation">,</span> self<span class="token punctuation">.</span>G_gan<span class="token punctuation">,</span> self<span class="token punctuation">.</span>G_vgg<span class="token punctuation">,</span> self<span class="token punctuation">.</span>G_init_loss<span class="token punctuation">]</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>D_loss_merge <span class="token operator">=</span> tf<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>D_loss<span class="token punctuation">]</span><span class="token punctuation">)</span>
</pre></details>
<p>&#x4EE5;&#x4E0A;&#x4EE3;&#x7801;&#x4F4D;&#x4E8E;model.py&#x4E2D;</p>
<p><strong>3.&#x6A21;&#x578B;&#x8BAD;&#x7EC3;</strong><br>
&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#x63D0;&#x51FA;&#x7684; AnimeGAN &#x53EF;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x4E0E;&#x672A;&#x914D;&#x5BF9;&#x7684;&#x8BAD;&#x7EC3;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x7AEF;&#x5230;&#x7AEF;&#x7684;&#x8BAD;&#x7EC3;&#x3002;&#x7531;&#x4E8E; GAN &#x6A21;&#x578B;&#x662F;&#x9AD8;&#x5EA6;&#x975E;&#x7EBF;&#x6027;&#x7684;&#xFF0C;&#x5728;&#x968F;&#x673A;&#x521D;&#x59CB;&#x5316;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F18;&#x5316;&#x5F88;&#x5BB9;&#x6613;&#x88AB;&#x56F0;&#x5728;&#x5C40;&#x90E8;&#x6700;&#x4F18;&#x89E3;&#x3002;CartoonGAN &#x5EFA;&#x8BAE;&#xFF0C;&#x5BF9;&#x751F;&#x6210;&#x5668;&#x7684;&#x9884;&#x8BAD;&#x7EC3;&#x6709;&#x52A9;&#x4E8E;&#x52A0;&#x901F; GAN &#x7684;&#x6536;&#x655B;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x53EA;&#x4F7F;&#x7528;&#x5185;&#x5BB9;&#x635F;&#x5931;&#x51FD;&#x6570;Lcon(G, D)&#x5BF9;&#x751F;&#x6210;&#x7F51;&#x7EDC; G &#x8FDB;&#x884C;&#x9884;&#x8BAD;&#x7EC3;&#x3002;<br>
&#x5176;&#x4E2D;&#x5BF9;&#x4E00;&#x4E2A; epoch &#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#x8BAD;&#x7EC3;&#xFF0C;&#x5B66;&#x4E60;&#x7387;&#x8BBE;&#x7F6E;&#x4E3A;2e-4&#x3002;&#x5728; AnimeGAN &#x7684;&#x8BAD;&#x7EC3;&#x9636;&#x6BB5;&#xFF0C;&#x751F;&#x6210;&#x5668;&#x548C;&#x9274;&#x522B;&#x5668;&#x7684;&#x5B66;&#x4E60;&#x7387;&#x5206;&#x522B;&#x4E3A;2e-5&#x548C;4e-5&#x3002;AnimeGAN&#x7684; epochs &#x662F;100&#xFF0C;batch size &#x8BBE;&#x7F6E;&#x4E3A;12&#x3002;Adam &#x4F18;&#x5316;&#x5668;&#x7528;&#x6765;&#x6700;&#x5C0F;&#x5316;&#x603B;&#x635F;&#x5931;&#x3002;</p>
<details><summary>&#x6A21;&#x578B;&#x8BAD;&#x7EC3;</summary>
<pre data-role="codeBlock" data-info="python" class="language-python">    <span class="token keyword keyword-def">def</span> <span class="token function">train</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># initialize all variables</span>
        self<span class="token punctuation">.</span>sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>global_variables_initializer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment"># saver to save model</span>
        self<span class="token punctuation">.</span>saver <span class="token operator">=</span> tf<span class="token punctuation">.</span>train<span class="token punctuation">.</span>Saver<span class="token punctuation">(</span>max_to_keep<span class="token operator">=</span>self<span class="token punctuation">.</span>epoch<span class="token punctuation">)</span>

        <span class="token comment"># summary writer</span>
        self<span class="token punctuation">.</span>writer <span class="token operator">=</span> tf<span class="token punctuation">.</span>summary<span class="token punctuation">.</span>FileWriter<span class="token punctuation">(</span>
            self<span class="token punctuation">.</span>log_dir <span class="token operator">+</span> <span class="token string">&apos;/&apos;</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>model_dir<span class="token punctuation">,</span> self<span class="token punctuation">.</span>sess<span class="token punctuation">.</span>graph<span class="token punctuation">)</span>

        <span class="token triple-quoted-string string">&quot;&quot;&quot; Input Image&quot;&quot;&quot;</span>
        real_img_op<span class="token punctuation">,</span> anime_img_op<span class="token punctuation">,</span> anime_smooth_op <span class="token operator">=</span> self<span class="token punctuation">.</span>real_image_generator<span class="token punctuation">.</span>load_images<span class="token punctuation">(</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>anime_image_generator<span class="token punctuation">.</span>load_images<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>anime_smooth_generator<span class="token punctuation">.</span>load_images<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># restore check-point if it exits</span>
        could_load<span class="token punctuation">,</span> checkpoint_counter <span class="token operator">=</span> self<span class="token punctuation">.</span>load<span class="token punctuation">(</span>self<span class="token punctuation">.</span>checkpoint_dir<span class="token punctuation">)</span>
        <span class="token keyword keyword-if">if</span> could_load<span class="token punctuation">:</span>
            start_epoch <span class="token operator">=</span> checkpoint_counter <span class="token operator">+</span> <span class="token number">1</span>

            <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">&quot; [*] Load SUCCESS&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            start_epoch <span class="token operator">=</span> <span class="token number">0</span>

            <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">&quot; [!] Load failed...&quot;</span><span class="token punctuation">)</span>

        <span class="token comment"># loop for epoch</span>
        init_mean_loss <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        mean_loss <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token comment"># training times , G : D = self.training_rate : 1</span>
        j <span class="token operator">=</span> self<span class="token punctuation">.</span>training_rate
        <span class="token keyword keyword-for">for</span> epoch <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>start_epoch<span class="token punctuation">,</span> self<span class="token punctuation">.</span>epoch<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-for">for</span> idx <span class="token keyword keyword-in">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>dataset_num <span class="token operator">/</span> self<span class="token punctuation">.</span>batch_size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                anime<span class="token punctuation">,</span> anime_smooth<span class="token punctuation">,</span> real <span class="token operator">=</span> self<span class="token punctuation">.</span>sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>
                    <span class="token punctuation">[</span>anime_img_op<span class="token punctuation">,</span> anime_smooth_op<span class="token punctuation">,</span> real_img_op<span class="token punctuation">]</span><span class="token punctuation">)</span>
                train_feed_dict <span class="token operator">=</span> <span class="token punctuation">{</span>
                    self<span class="token punctuation">.</span>real<span class="token punctuation">:</span> real<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    self<span class="token punctuation">.</span>anime<span class="token punctuation">:</span> anime<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    self<span class="token punctuation">.</span>anime_gray<span class="token punctuation">:</span> anime<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    self<span class="token punctuation">.</span>anime_smooth<span class="token punctuation">:</span> anime_smooth<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                <span class="token punctuation">}</span>

                <span class="token keyword keyword-if">if</span> epoch <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>init_epoch<span class="token punctuation">:</span>
                    <span class="token comment"># Init G</span>
                    start_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>

                    real_images<span class="token punctuation">,</span> generator_images<span class="token punctuation">,</span> _<span class="token punctuation">,</span> v_loss<span class="token punctuation">,</span> summary_str <span class="token operator">=</span> self<span class="token punctuation">.</span>sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>real<span class="token punctuation">,</span> self<span class="token punctuation">.</span>generated<span class="token punctuation">,</span>
                                                                                           self<span class="token punctuation">.</span>init_optim<span class="token punctuation">,</span>
                                                                                           self<span class="token punctuation">.</span>init_loss<span class="token punctuation">,</span> self<span class="token punctuation">.</span>V_loss_merge<span class="token punctuation">]</span><span class="token punctuation">,</span> feed_dict<span class="token operator">=</span>train_feed_dict<span class="token punctuation">)</span>
                    self<span class="token punctuation">.</span>writer<span class="token punctuation">.</span>add_summary<span class="token punctuation">(</span>summary_str<span class="token punctuation">,</span> epoch<span class="token punctuation">)</span>
                    init_mean_loss<span class="token punctuation">.</span>append<span class="token punctuation">(</span>v_loss<span class="token punctuation">)</span>

                    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">&quot;Epoch: %3d Step: %5d / %5d  time: %f s init_v_loss: %.8f  mean_v_loss: %.8f&quot;</span> <span class="token operator">%</span> <span class="token punctuation">(</span>epoch<span class="token punctuation">,</span> idx<span class="token punctuation">,</span>
                          <span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>dataset_num <span class="token operator">/</span> self<span class="token punctuation">.</span>batch_size<span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start_time<span class="token punctuation">,</span> v_loss<span class="token punctuation">,</span> np<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>init_mean_loss<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>idx<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">200</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                        init_mean_loss<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
                    start_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>

                    <span class="token keyword keyword-if">if</span> j <span class="token operator">==</span> self<span class="token punctuation">.</span>training_rate<span class="token punctuation">:</span>
                        <span class="token comment"># Update D</span>
                        _<span class="token punctuation">,</span> d_loss<span class="token punctuation">,</span> summary_str <span class="token operator">=</span> self<span class="token punctuation">.</span>sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>D_optim<span class="token punctuation">,</span> self<span class="token punctuation">.</span>Discriminator_loss<span class="token punctuation">,</span> self<span class="token punctuation">.</span>D_loss_merge<span class="token punctuation">]</span><span class="token punctuation">,</span>
                                                               feed_dict<span class="token operator">=</span>train_feed_dict<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>writer<span class="token punctuation">.</span>add_summary<span class="token punctuation">(</span>summary_str<span class="token punctuation">,</span> epoch<span class="token punctuation">)</span>

                    <span class="token comment"># Update G</span>
                    real_images<span class="token punctuation">,</span> generator_images<span class="token punctuation">,</span> _<span class="token punctuation">,</span> g_loss<span class="token punctuation">,</span> summary_str <span class="token operator">=</span> self<span class="token punctuation">.</span>sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span>self<span class="token punctuation">.</span>real<span class="token punctuation">,</span> self<span class="token punctuation">.</span>generated<span class="token punctuation">,</span> self<span class="token punctuation">.</span>G_optim<span class="token punctuation">,</span>
                                                                                           self<span class="token punctuation">.</span>Generator_loss<span class="token punctuation">,</span> self<span class="token punctuation">.</span>G_loss_merge<span class="token punctuation">]</span><span class="token punctuation">,</span> feed_dict<span class="token operator">=</span>train_feed_dict<span class="token punctuation">)</span>
                    self<span class="token punctuation">.</span>writer<span class="token punctuation">.</span>add_summary<span class="token punctuation">(</span>summary_str<span class="token punctuation">,</span> epoch<span class="token punctuation">)</span>

                    mean_loss<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>d_loss<span class="token punctuation">,</span> g_loss<span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token keyword keyword-if">if</span> j <span class="token operator">==</span> self<span class="token punctuation">.</span>training_rate<span class="token punctuation">:</span>

                        <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>
                            <span class="token string">&quot;Epoch: %3d Step: %5d / %5d  time: %f s d_loss: %.8f, g_loss: %.8f -- mean_d_loss: %.8f, mean_g_loss: %.8f&quot;</span> <span class="token operator">%</span> <span class="token punctuation">(</span>
                                epoch<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>dataset_num <span class="token operator">/</span> self<span class="token punctuation">.</span>batch_size<span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span>
                                <span class="token punctuation">)</span> <span class="token operator">-</span> start_time<span class="token punctuation">,</span> d_loss<span class="token punctuation">,</span> g_loss<span class="token punctuation">,</span> np<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>mean_loss<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                np<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>mean_loss<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
                        <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>
                            <span class="token string">&quot;Epoch: %3d Step: %5d / %5d time: %f s , g_loss: %.8f --  mean_g_loss: %.8f&quot;</span> <span class="token operator">%</span> <span class="token punctuation">(</span>
                                epoch<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>dataset_num <span class="token operator">/</span> self<span class="token punctuation">.</span>batch_size<span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start_time<span class="token punctuation">,</span> g_loss<span class="token punctuation">,</span> np<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>mean_loss<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

                    <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">200</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                        mean_loss<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>

                    j <span class="token operator">=</span> j <span class="token operator">-</span> <span class="token number">1</span>
                    <span class="token keyword keyword-if">if</span> j <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">:</span>
                        j <span class="token operator">=</span> self<span class="token punctuation">.</span>training_rate

            <span class="token keyword keyword-if">if</span> <span class="token punctuation">(</span>epoch <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>init_epoch <span class="token keyword keyword-and">and</span> np<span class="token punctuation">.</span>mod<span class="token punctuation">(</span>epoch <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>save_freq<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>save<span class="token punctuation">(</span>self<span class="token punctuation">.</span>checkpoint_dir<span class="token punctuation">,</span> epoch<span class="token punctuation">)</span>

            <span class="token keyword keyword-if">if</span> epoch <span class="token operator">&gt;=</span> self<span class="token punctuation">.</span>init_epoch <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>
                <span class="token triple-quoted-string string">&quot;&quot;&quot; Result Image &quot;&quot;&quot;</span>
                val_files <span class="token operator">=</span> glob<span class="token punctuation">(</span><span class="token string">&apos;./dataset/{}/*.*&apos;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token string">&apos;val&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                save_path <span class="token operator">=</span> <span class="token string">&apos;./{}/{:03d}/&apos;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>sample_dir<span class="token punctuation">,</span> epoch<span class="token punctuation">)</span>
                check_folder<span class="token punctuation">(</span>save_path<span class="token punctuation">)</span>
                <span class="token keyword keyword-for">for</span> i<span class="token punctuation">,</span> sample_file <span class="token keyword keyword-in">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>val_files<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">&apos;val: &apos;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span> sample_file<span class="token punctuation">)</span>
                    sample_image <span class="token operator">=</span> np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>
                        load_test_data<span class="token punctuation">(</span>sample_file<span class="token punctuation">,</span> self<span class="token punctuation">.</span>img_size<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    test_real<span class="token punctuation">,</span> test_generated <span class="token operator">=</span> self<span class="token punctuation">.</span>sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>
                        <span class="token punctuation">[</span>self<span class="token punctuation">.</span>test_real<span class="token punctuation">,</span> self<span class="token punctuation">.</span>test_generated<span class="token punctuation">]</span><span class="token punctuation">,</span> feed_dict<span class="token operator">=</span><span class="token punctuation">{</span>self<span class="token punctuation">.</span>test_real<span class="token punctuation">:</span> sample_image<span class="token punctuation">}</span><span class="token punctuation">)</span>
                    save_images<span class="token punctuation">(</span>test_real<span class="token punctuation">,</span> save_path <span class="token operator">+</span>
                                <span class="token string">&apos;{:03d}_a.jpg&apos;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>
                    save_images<span class="token punctuation">(</span>test_generated<span class="token punctuation">,</span> save_path <span class="token operator">+</span>
                                <span class="token string">&apos;{:03d}_b.jpg&apos;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>
</pre></details>
<p>&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#x4EE5;&#x4E0A;&#x8BAD;&#x7EC3;&#x4EE3;&#x7801;&#x4F4D;&#x4E8E;model.py&#x4E2D;&#xFF0C;&#x8BAD;&#x7EC3;&#x8D85;&#x53C2;&#x6570;&#x548C;&#x6267;&#x884C;&#x8BAD;&#x7EC3;&#x4EE3;&#x7801;&#x4F4D;&#x4E8E;train.py&#x4E2D;</p>
<h4 class="mume-header" id="picture-stylized">Picture stylized</h4>

<p>&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#x9996;&#x5148;&#x52A0;&#x8F7D;&#x5DF2;&#x7ECF;&#x8BAD;&#x7EC3;&#x597D;&#x7684;&#x6A21;&#x578B;&#x6743;&#x91CD;&#xFF0C;&#x7136;&#x540E;&#x5BFC;&#x5165;&#x5E26;&#x98CE;&#x683C;&#x5316;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x6700;&#x540E;&#x5BF9;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x52A8;&#x6F2B;&#x98CE;&#x683C;&#x5316;&#x3002;</p>
<details><summary>&#x56FE;&#x7247;&#x98CE;&#x683C;&#x5316;</summary>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword keyword-def">def</span> <span class="token function">test</span><span class="token punctuation">(</span>style<span class="token punctuation">,</span> save_dir<span class="token punctuation">,</span> test_dir<span class="token punctuation">,</span> if_adjust_brightness<span class="token punctuation">,</span> img_size<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># tf.reset_default_graph()</span>
    checkpoint_dir <span class="token operator">=</span> <span class="token string">&quot;./checkpoint/generator_&quot;</span> <span class="token operator">+</span> style <span class="token operator">+</span> <span class="token string">&quot;_weight&quot;</span>
    check_folder<span class="token punctuation">(</span>save_dir<span class="token punctuation">)</span>
    test_files <span class="token operator">=</span> glob<span class="token punctuation">(</span><span class="token string">&apos;{}/*.*&apos;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>test_dir<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>test_dir<span class="token punctuation">)</span>
    <span class="token keyword keyword-assert">assert</span> test_files <span class="token operator">!=</span> <span class="token boolean">None</span>

    test_real <span class="token operator">=</span> tf<span class="token punctuation">.</span>placeholder<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>float32<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">&apos;test&apos;</span><span class="token punctuation">)</span>

    <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>variable_scope<span class="token punctuation">(</span><span class="token string">&quot;generator&quot;</span><span class="token punctuation">,</span> reuse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        test_generated <span class="token operator">=</span> generator<span class="token punctuation">.</span>G_net<span class="token punctuation">(</span>test_real<span class="token punctuation">)</span><span class="token punctuation">.</span>fake
    saver <span class="token operator">=</span> tf<span class="token punctuation">.</span>train<span class="token punctuation">.</span>Saver<span class="token punctuation">(</span><span class="token punctuation">)</span>

    gpu_options <span class="token operator">=</span> tf<span class="token punctuation">.</span>GPUOptions<span class="token punctuation">(</span>allow_growth<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>Session<span class="token punctuation">(</span>config<span class="token operator">=</span>tf<span class="token punctuation">.</span>ConfigProto<span class="token punctuation">(</span>allow_soft_placement<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> gpu_options<span class="token operator">=</span>gpu_options<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword keyword-as">as</span> sess<span class="token punctuation">:</span>
        <span class="token comment"># tf.global_variables_initializer().run()</span>
        <span class="token comment"># load model</span>
        ckpt <span class="token operator">=</span> tf<span class="token punctuation">.</span>train<span class="token punctuation">.</span>get_checkpoint_state<span class="token punctuation">(</span>
            checkpoint_dir<span class="token punctuation">)</span>  <span class="token comment"># checkpoint file information</span>
        <span class="token keyword keyword-if">if</span> ckpt <span class="token keyword keyword-and">and</span> ckpt<span class="token punctuation">.</span>model_checkpoint_path<span class="token punctuation">:</span>
            ckpt_name <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>
                ckpt<span class="token punctuation">.</span>model_checkpoint_path<span class="token punctuation">)</span>  <span class="token comment"># first line</span>
            saver<span class="token punctuation">.</span>restore<span class="token punctuation">(</span>sess<span class="token punctuation">,</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>checkpoint_dir<span class="token punctuation">,</span> ckpt_name<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>
                <span class="token string">&quot; [*] Success to read {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>checkpoint_dir<span class="token punctuation">,</span> ckpt_name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">&quot; [*] Failed to find a checkpoint&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-return">return</span>
        <span class="token comment"># stats_graph(tf.get_default_graph())</span>

        begin <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-for">for</span> sample_file <span class="token keyword keyword-in">in</span> tqdm<span class="token punctuation">(</span>test_files<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># print(&apos;Processing image: &apos; + sample_file)</span>
            sample_image <span class="token operator">=</span> np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>load_test_data<span class="token punctuation">(</span>sample_file<span class="token punctuation">,</span> img_size<span class="token punctuation">)</span><span class="token punctuation">)</span>
            base_name <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>sample_file<span class="token punctuation">)</span>
            name_list <span class="token operator">=</span> base_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&apos;.&apos;</span><span class="token punctuation">)</span>
            file_name <span class="token operator">=</span> name_list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;_&quot;</span><span class="token operator">+</span>style<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token operator">+</span>name_list<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
            image_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>
                save_dir<span class="token punctuation">,</span> file_name<span class="token punctuation">)</span>
            fake_img <span class="token operator">=</span> sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>test_generated<span class="token punctuation">,</span> feed_dict<span class="token operator">=</span><span class="token punctuation">{</span>
                                test_real<span class="token punctuation">:</span> sample_image<span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-if">if</span> if_adjust_brightness<span class="token punctuation">:</span>
                save_images<span class="token punctuation">(</span>fake_img<span class="token punctuation">,</span> image_path<span class="token punctuation">,</span> sample_file<span class="token punctuation">)</span>
            <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
                save_images<span class="token punctuation">(</span>fake_img<span class="token punctuation">,</span> image_path<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>
        end <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&apos;test-time: </span><span class="token interpolation"><span class="token punctuation">{</span>end<span class="token operator">-</span>begin<span class="token punctuation">}</span></span><span class="token string"> s&apos;</span></span><span class="token punctuation">)</span>
        <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&apos;one image test time : </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token punctuation">(</span>end<span class="token operator">-</span>begin<span class="token punctuation">)</span><span class="token operator">/</span><span class="token builtin">len</span><span class="token punctuation">(</span>test_files<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> s&apos;</span></span><span class="token punctuation">)</span>
</pre></details>
<p><strong>&#x6210;&#x679C;&#x5C55;&#x793A;&#xFF1A;</strong></p>
<center>
<div class="section">
    <div class="inline-block">
        <img src="AnimeStylized/res/image/input/1.png" alt="add trip" width="350">
        <img src="AnimeStylized/res/image/output/1-hayao.png" alt="delete account" width="350">
    </div>
    <div class="inline-block">
        <img src="AnimeStylized/res/image/output/1-paprika.png" alt="delete account" width="350">
        <img src="AnimeStylized/res/image/output/1-shinkai.png" alt="delete account" width="350">
    </div>
    <div class="inline-block">
        <img src="AnimeStylized/res/image/input/2.jpg" alt="add trip" width="300">
        <img src="AnimeStylized/res/image/output/2-hayao.jpg" alt="delete account" width="300">
    </div>
    <div class="inline-block">
        <img src="AnimeStylized/res/image/output/2-paprika.jpg" alt="delete account" width="300">
        <img src="AnimeStylized/res/image/output/2-shinkai.jpg" alt="delete account" width="300">
    </div>
</div>
</center>
<h4 class="mume-header" id="video-stylized">Video stylized</h4>

<p>&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#x5B9E;&#x73B0;&#x4E86;&#x56FE;&#x7247;&#x98CE;&#x683C;&#x5316;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x89C6;&#x9891;&#x98CE;&#x683C;&#x5316;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x9010;&#x5E27;&#x5BF9;&#x56FE;&#x5F62;&#x8FDB;&#x884C;&#x52A8;&#x6F2B;&#x98CE;&#x683C;&#x5316;&#xFF0C;&#x7136;&#x540E;&#x9002;&#x5F53;&#x8FDB;&#x884C;&#x5E73;&#x6ED1;&#x5904;&#x7406;&#x5373;&#x53EF;</p>
<details><summary>&#x89C6;&#x9891;&#x98CE;&#x683C;&#x5316;</summary>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword keyword-def">def</span> <span class="token function">cvt2anime_video</span><span class="token punctuation">(</span>video<span class="token punctuation">,</span> output<span class="token punctuation">,</span> style<span class="token punctuation">,</span> output_format<span class="token operator">=</span><span class="token string">&apos;MP4V&apos;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    checkpoint_dir <span class="token operator">=</span> <span class="token string">&quot;./checkpoint/generator_&quot;</span> <span class="token operator">+</span> style <span class="token operator">+</span> <span class="token string">&quot;_weight&quot;</span>
    gpu_stat <span class="token operator">=</span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>tf<span class="token punctuation">.</span>config<span class="token punctuation">.</span>experimental<span class="token punctuation">.</span>list_physical_devices<span class="token punctuation">(</span><span class="token string">&apos;gpu&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-if">if</span> gpu_stat<span class="token punctuation">:</span>
        os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">&quot;CUDA_VISIBLE_DEVICES&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span>
    gpu_options <span class="token operator">=</span> tf<span class="token punctuation">.</span>GPUOptions<span class="token punctuation">(</span>allow_growth<span class="token operator">=</span>gpu_stat<span class="token punctuation">)</span>

    test_real <span class="token operator">=</span> tf<span class="token punctuation">.</span>placeholder<span class="token punctuation">(</span>tf<span class="token punctuation">.</span>float32<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">&apos;test&apos;</span><span class="token punctuation">)</span>
    <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>variable_scope<span class="token punctuation">(</span><span class="token string">&quot;generator&quot;</span><span class="token punctuation">,</span> reuse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        test_generated <span class="token operator">=</span> generator<span class="token punctuation">.</span>G_net<span class="token punctuation">(</span>test_real<span class="token punctuation">)</span><span class="token punctuation">.</span>fake

    saver <span class="token operator">=</span> tf<span class="token punctuation">.</span>train<span class="token punctuation">.</span>Saver<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># load video</span>
    vid <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span>video<span class="token punctuation">)</span>
    vid_name <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>video<span class="token punctuation">)</span>
    total <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>vid<span class="token punctuation">.</span>get<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_FRAME_COUNT<span class="token punctuation">)</span><span class="token punctuation">)</span>
    fps <span class="token operator">=</span> vid<span class="token punctuation">.</span>get<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_FPS<span class="token punctuation">)</span>
    width <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>vid<span class="token punctuation">.</span>get<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_FRAME_WIDTH<span class="token punctuation">)</span><span class="token punctuation">)</span>
    height <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>vid<span class="token punctuation">.</span>get<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>CAP_PROP_FRAME_HEIGHT<span class="token punctuation">)</span><span class="token punctuation">)</span>
    codec <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoWriter_fourcc<span class="token punctuation">(</span><span class="token operator">*</span>output_format<span class="token punctuation">)</span>

    tfconfig <span class="token operator">=</span> tf<span class="token punctuation">.</span>ConfigProto<span class="token punctuation">(</span>
        allow_soft_placement<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> gpu_options<span class="token operator">=</span>gpu_options<span class="token punctuation">)</span>
    <span class="token keyword keyword-with">with</span> tf<span class="token punctuation">.</span>Session<span class="token punctuation">(</span>config<span class="token operator">=</span>tfconfig<span class="token punctuation">)</span> <span class="token keyword keyword-as">as</span> sess<span class="token punctuation">:</span>
        <span class="token comment"># tf.global_variables_initializer().run()</span>
        <span class="token comment"># load model</span>
        ckpt <span class="token operator">=</span> tf<span class="token punctuation">.</span>train<span class="token punctuation">.</span>get_checkpoint_state<span class="token punctuation">(</span>
            checkpoint_dir<span class="token punctuation">)</span>  <span class="token comment"># checkpoint file information</span>
        <span class="token keyword keyword-if">if</span> ckpt <span class="token keyword keyword-and">and</span> ckpt<span class="token punctuation">.</span>model_checkpoint_path<span class="token punctuation">:</span>
            ckpt_name <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>
                ckpt<span class="token punctuation">.</span>model_checkpoint_path<span class="token punctuation">)</span>  <span class="token comment"># first line</span>
            saver<span class="token punctuation">.</span>restore<span class="token punctuation">(</span>sess<span class="token punctuation">,</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>checkpoint_dir<span class="token punctuation">,</span> ckpt_name<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span>
                <span class="token string">&quot; [*] Success to read {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>checkpoint_dir<span class="token punctuation">,</span> ckpt_name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-else">else</span><span class="token punctuation">:</span>
            <span class="token keyword keyword-print">print</span><span class="token punctuation">(</span><span class="token string">&quot; [*] Failed to find a checkpoint&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-return">return</span>

        video_out <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoWriter<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>output<span class="token punctuation">,</span> vid_name<span class="token punctuation">.</span>rsplit<span class="token punctuation">(</span>
            <span class="token string">&apos;.&apos;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f&quot;_</span><span class="token interpolation"><span class="token punctuation">{</span>style<span class="token punctuation">}</span></span><span class="token string">.mp4&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> codec<span class="token punctuation">,</span> fps<span class="token punctuation">,</span> <span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span>

        pbar <span class="token operator">=</span> tqdm<span class="token punctuation">(</span>total<span class="token operator">=</span>total<span class="token punctuation">,</span> ncols<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>
        pbar<span class="token punctuation">.</span>set_description<span class="token punctuation">(</span>
            <span class="token string-interpolation"><span class="token string">f&quot;Making: </span><span class="token interpolation"><span class="token punctuation">{</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>video<span class="token punctuation">)</span><span class="token punctuation">.</span>rsplit<span class="token punctuation">(</span><span class="token string">&apos;.&apos;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f&apos;_</span><span class="token interpolation"><span class="token punctuation">{</span>style<span class="token punctuation">}</span></span><span class="token string">.mp4&apos;</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword keyword-while">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
            ret<span class="token punctuation">,</span> frame <span class="token operator">=</span> vid<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword keyword-if">if</span> <span class="token keyword keyword-not">not</span> ret<span class="token punctuation">:</span>
                <span class="token keyword keyword-break">break</span>
            frame <span class="token operator">=</span> np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>np<span class="token punctuation">.</span>expand_dims<span class="token punctuation">(</span>process_image<span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            fake_img <span class="token operator">=</span> sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>test_generated<span class="token punctuation">,</span> feed_dict<span class="token operator">=</span><span class="token punctuation">{</span>test_real<span class="token punctuation">:</span> frame<span class="token punctuation">}</span><span class="token punctuation">)</span>
            fake_img <span class="token operator">=</span> post_precess<span class="token punctuation">(</span>fake_img<span class="token punctuation">,</span> <span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span>
            video_out<span class="token punctuation">.</span>write<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>fake_img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span>
            pbar<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

        pbar<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
        vid<span class="token punctuation">.</span>release<span class="token punctuation">(</span><span class="token punctuation">)</span>
        video_out<span class="token punctuation">.</span>release<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword keyword-return">return</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>output<span class="token punctuation">,</span> vid_name<span class="token punctuation">.</span>rsplit<span class="token punctuation">(</span><span class="token string">&apos;.&apos;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f&quot;_</span><span class="token interpolation"><span class="token punctuation">{</span>style<span class="token punctuation">}</span></span><span class="token string">.mp4&quot;</span></span><span class="token punctuation">)</span>
</pre></details>
<p><strong>&#x6210;&#x679C;&#x5C55;&#x793A;&#xFF1A;</strong><br>
&#x539F;&#x89C6;&#x9891;&#xFF1A;</p>
<center><img src="1.gif"></center>
&#x5904;&#x7406;&#x540E;&#xFF1A;
<center>
<img src="1_hayao.gif">
<img src="1_shinkai.gif">
</center>
<h4 class="mume-header" id="face-stylized">Face stylized</h4>

<p>&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#x5728;&#x4E0A;&#x8FF0;&#x89C6;&#x9891;&#x4E2D;&#x51FA;&#x73B0;&#x4E86;&#x4EBA;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8BE5;&#x6A21;&#x578B;&#x5BF9;&#x4EBA;&#x8138;&#x7684;&#x5904;&#x7406;&#x6548;&#x679C;&#x4E0D;&#x4F73;&#xFF0C;&#x6BD4;&#x8F83;&#x6A21;&#x7CCA;&#x3002;&#x56E0;&#x6B64;&#x4E3A;&#x4E86;&#x6539;&#x8FDB;&#x6A21;&#x578B;&#xFF0C;&#x6211;&#x4EEC;&#x91C7;&#x7528;dlib&#x5E93;&#x7684;&#x4EBA;&#x8138;&#x7279;&#x5F81;&#x68C0;&#x6D4B;&#x5668;&#x5BF9;&#x4EBA;&#x8138;&#x7279;&#x5F81;&#x8FDB;&#x884C;&#x63D0;&#x53D6;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x4EBA;&#x8138;&#x7279;&#x5F81;&#x8FDB;&#x884C;&#x98CE;&#x683C;&#x5316;&#x5904;&#x7406;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x89E3;&#x51B3;&#x4EBA;&#x8138;&#x6A21;&#x7CCA;&#x5316;&#x7684;&#x95EE;&#x9898;&#x3002;<br>
&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#x9996;&#x5148;&#x662F;&#x52A0;&#x8F7D;&#x4EBA;&#x8138;&#x7279;&#x5F81;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x751F;&#x6210;&#x7279;&#x5F81;&#x63D0;&#x53D6;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x5229;&#x7528;matplotlib&#x5C06;&#x7279;&#x5F81;&#x70B9;&#x53EF;&#x89C6;&#x5316;&#x5982;&#x4E0B;&#xFF1A;</p>
<center><img src="face_feature.png"></center>
&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#x5BF9;&#x5BFC;&#x5165;&#x7684;&#x56FE;&#x7247;&#x8FDB;&#x884C;&#x5BF9;&#x9F50;&#x3001;&#x88C1;&#x526A;&#x3001;&#x7F29;&#x653E;&#x3001;&#x586B;&#x5145;&#x7B49;&#x5904;&#x7406;&#xFF0C;&#x7136;&#x540E;&#x5229;&#x7528;&#x63D0;&#x53D6;&#x5230;&#x7684;&#x7279;&#x4FA6;&#x70B9;&#x8FDB;&#x884C;&#x4EBA;&#x8138;&#x52A8;&#x6F2B;&#x98CE;&#x683C;&#x5316;
<p><strong>&#x6210;&#x679C;&#x5C55;&#x793A;&#xFF1A;</strong></p>
<center><img src="AnimeStylized/res/face_img/output/1.jpg" alt="add trip" width="500">
<img src="AnimeStylized/res/face_img/output/2.jpg" alt="delete account" width="500">
<img src="AnimeStylized/res/face_img/output/3.jpg" alt="delete account" width="500">
</center>
<h3 class="mume-header" id="%E5%9B%9B-conclusion-and-distribution">&#x56DB;&#x3001;Conclusion and Distribution</h3>

<p><strong>1.&#x603B;&#x7ED3;</strong><br>
&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#x9879;&#x76EE;&#x524D;&#x671F;&#xFF0C;&#x786E;&#x5B9A;&#x4E86;&#x9009;&#x9898;&#x540E;&#xFF0C;&#x5B66;&#x4E60;&#x4E86;&#x57FA;&#x672C;&#x7684;&#x751F;&#x6210;&#x5BF9;&#x6297;&#x7F51;&#x7EDC;GAN&#x3002;&#x7136;&#x540E;&#x5B66;&#x4E60;&#x4E86;cartoonGAN&#xFF0C;&#x4E00;&#x79CD;&#x52A8;&#x6F2B;&#x98CE;&#x683C;&#x7684;&#x751F;&#x6210;&#x5BF9;&#x6297;&#x7F51;&#x7EDC;&#xFF0C;&#x4F46;&#x662F;&#x6548;&#x679C;&#x4EE5;&#x53CA;&#x8BAD;&#x7EC3;&#x91CF;&#x4E0A;&#x90FD;&#x6709;&#x4E0D;&#x8DB3;&#xFF0C;&#x56E0;&#x6B64;&#x91C7;&#x7528;&#x4E86;&#x4E00;&#x79CD;&#x65B0;&#x578B;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;animeGAN&#x3002;&#x5728;&#x9605;&#x8BFB;&#x5E76;&#x5B66;&#x4E60;&#x8BE5;&#x8BBA;&#x6587;&#x4E2D;&#x7684;&#x7279;&#x70B9;&#x548C;&#x63D0;&#x51FA;&#x7684;&#x4E09;&#x79CD;&#x635F;&#x5931;&#x51FD;&#x6570;&#x540E;&#xFF0C;&#x7ECF;&#x8FC7;&#x7F16;&#x5199;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x4E86;&#x56FE;&#x7247;&#x52A8;&#x6F2B;&#x98CE;&#x683C;&#x5316;&#xFF0C;&#x89C6;&#x9891;&#x52A8;&#x6F2B;&#x98CE;&#x683C;&#x5316;&#x4EE5;&#x53CA;&#x4EBA;&#x8138;&#x52A8;&#x6F2B;&#x98CE;&#x683C;&#x5316;&#x3002;<br>
&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#x5176;&#x4E2D;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x4E3B;&#x8981;&#x662F;&#x5E93;&#x7248;&#x672C;&#x4E0D;&#x517C;&#x5BB9;&#x95EE;&#x9898;&#xFF0C;&#x4F8B;&#x5982;&#x5728;&#x4EBA;&#x8138;&#x68C0;&#x6D4B;&#x7528;&#x5230;&#x7684;dlib&#x9700;&#x8981;&#x9002;&#x914D;python3.9&#x7248;&#x672C;&#xFF0C;&#x6574;&#x4F53;&#x6846;&#x67B6;&#x4F7F;&#x7528;&#x7684;tensorflow&#x662F;&#x57FA;&#x4E8E;1.x&#x7248;&#x672C;&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5B89;&#x88C5;&#x7684;tensorflow&#x662F;2.x&#x4E0D;&#x5411;&#x524D;&#x517C;&#x5BB9;&#xFF0C;&#x800C;&#x5982;&#x679C;&#x5BF9;tensorflow&#x8FDB;&#x884C;&#x7248;&#x672C;&#x964D;&#x4F4E;&#xFF0C;&#x53C8;&#x4E0D;&#x9002;&#x914D;python3.9&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x5E93;&#xFF0C;&#x56E0;&#x6B64;&#x5C1D;&#x8BD5;&#x4E86;&#x5F88;&#x591A;&#x65B9;&#x6CD5;&#x517C;&#x5BB9;tensorflow 1.x&#x7248;&#x672C;&#x3002;&#x56E0;&#x6B64;&#x4E0B;&#x6B21;&#x5728;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x65F6;&#x5E94;&#x8BE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x9002;&#x914D;&#x6DF1;&#x5EA6;&#x5B66;&#x4E60;&#x6846;&#x67B6;&#x5982;tensorflow&#xFF0C;&#x786C;&#x4EF6;cuda&#x7684;python&#x73AF;&#x5883;&#x3002;<br>
<strong>2.&#x6210;&#x5458;&#x5206;&#x5DE5;</strong></p>
<p>&#x7EC4;&#x957F;&#xFF1A;&#x534E;&#x4F73;&#x5F6C;(60%)</p>
<ol>
<li>(40%)&#x8D1F;&#x8D23;&#x9879;&#x76EE;&#x6574;&#x4F53;&#x6A21;&#x578B;&#x6784;&#x5EFA;&#xFF0C;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x7F16;&#x5199;&#xFF0C;&#x8C03;&#x8BD5;&#x4E0E;&#x540E;&#x671F;&#x6D4B;&#x8BD5;</li>
<li>(20%)&#x8D1F;&#x8D23;&#x9879;&#x76EE;&#x62A5;&#x544A;&#x7684;&#x64B0;&#x5199;</li>
</ol>
<p>&#x7EC4;&#x5458;&#xFF1A;&#x9122;&#x51EF;&#x745E;(40%)</p>
<ol>
<li>(20%)&#x8D1F;&#x8D23;&#x9879;&#x76EE;&#x9009;&#x9898;&#x62A5;&#x544A;&#x7684;&#x64B0;&#x5199;&#x548C;&#x9879;&#x76EE;&#x62A5;&#x544A;&#x7684;&#x64B0;&#x5199;</li>
<li>(20%)&#x8D1F;&#x8D23;&#x9879;&#x76EE;&#x4ECB;&#x7ECD;&#x89C6;&#x9891;&#x7684;&#x51C6;&#x5907;&#x548C;&#x5F55;&#x5236;</li>
</ol>
<h3 class="mume-header" id="%E4%BA%94-references">&#x4E94;&#x3001;References</h3>

<p>[1]Goodfellow, I. J., &#x201C;Generative Adversarial Networks&#x201D;, <i>arXiv e-prints</i>, 2014. doi:10.48550/arXiv.1406.2661.<br>
[2]Y. Chen, Y. -K. Lai and Y. -J. Liu, &quot;CartoonGAN: Generative Adversarial Networks for Photo Cartoonization,&quot; 2018 IEEE/CVF Conference on Computer Vision and Pattern Recognition, Salt Lake City, UT, USA, 2018, pp. 9465-9474, doi: 10.1109/CVPR.2018.00986.<br>
[3]Chen, J., Liu, G., Chen, X. (2020). AnimeGAN: A Novel Lightweight GAN for Photo Animation. In: Li, K., Li, W., Wang, H., Liu, Y. (eds) Artificial Intelligence Algorithms and Applications. ISICA 2019. Communications in Computer and Information Science, vol 1205. Springer, Singapore.</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>1 <a href="#fnref1" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn2" class="footnote-item"><p>2 <a href="#fnref2" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
<li id="fn3" class="footnote-item"><p>3 <a href="#fnref3" class="footnote-backref">&#x21A9;&#xFE0E;</a></p>
</li>
</ol>
</section>

      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>